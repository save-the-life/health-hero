# 게임 메인 페이지 UI 구성

이 문서는 게임의 메인 페이지 UI 구성에 대해 설명합니다.

## 1. 전체적인 화면 구성

게임 메인 페이지는 크게 **상단 부분** (캐릭터 정보, 자원, 설정)과 **중앙 부분** (게임 진행 페이즈/스테이지 맵)으로 나뉩니다.

배경은 밝고 활기찬 녹색 풍경에 노란색 돌길이 구불구불 이어져 있으며, 길을 따라 투명한 사각형 카드 형태로 게임 스테이지들이 배치되어 있습니다.

---

## 2. 상단 부분 (Header UI) ✅ 구현 완료

상단 부분은 모든 화면 상태에서 동일하게 유지되며, 화면 상단에 고정됩니다.

### 2.1. 캐릭터 정보 ✅ 구현 완료

- **위치**: 좌측 상단
- **구현 사양**:
  - 상단으로부터 12px 여백, 높이 60px 고정
  - 좌우 24px 패딩, 내부 요소 간 20px 간격
- **표시 내용**:
  - 레벨별 캐릭터 이미지 (원형 아이콘, 40x40px)
  - 캐릭터 이미지 (30x30px) 원형 블록 위에 표시
  - 사용자의 현재 레벨 표시 (70x24px 직사각형 블록, 원형 블록과 24px 겹침)
- **캐릭터 레벨별 외형** (동적 로딩 구현):
  - Lv.1: `/images/characters/level-1.png`
  - Lv.5: `/images/characters/level-5.png`
  - Lv.10: `/images/characters/level-10.png`
  - Lv.15: `/images/characters/level-15.png`
  - Lv.20: `/images/characters/level-20.png`

### 2.2. 하트 (생명력) ✅ 구현 완료

- **위치**: 중앙
- **구현 사양**:
  - 하트 아이콘 (44x44px)
  - 하트 우측 하단에 광고 버튼 (16x16px, 클릭 기능 없음)
  - 충전 시간 표시 블록 (70x24px, 하트 아이콘과 24px 겹침)
- **표시 내용**:
  - 빨간 하트 아이콘 (`/images/items/icon-heart.png`)
  - 현재 보유한 하트 개수 (흰색 텍스트, 16px, weight 400)
  - 다음 하트 충전까지 남은 시간 또는 "충전 완료"
- **하트 시스템** (실제 데이터 연동):
  - 최대 보유량: 5개
  - 자동 충전: 5분마다 +1 (최대 5개까지)
  - 하트 5개일 때: "충전 완료" 표시
  - 하트 4개 이하일 때: 실시간 카운트다운 표시 (예: "4분12초")
  - 차감 조건:
    - 스테이지 진입 시: -1
    - 문제 오답 시: -1
  - 하트 부족 시: 하트 부족 모달창 표시
  - 광고 충전: 광고 시청을 통해 하트 충전 가능

### 2.3. 포인트 ✅ 구현 완료

- **위치**: 하트 정보 우측
- **구현 사양**:
  - 별 아이콘 (40x40px)
  - 점수 표시 블록 (70x24px, 별 아이콘과 24px 겹침)
- **표시 내용**:
  - 노란색 별 아이콘 (`/images/items/Icon-star.png`)
  - 현재 보유한 포인트 (흰색 텍스트, 16px, weight 400)
- **포인트 시스템** (실제 데이터 연동):
  - 최초 회원가입 시: 500포인트 지급
  - 퀴즈 정답 시: 난이도별 점수 획득
  - 아이템 구매 시: 포인트 소모

### 2.4. 설정 ✅ 구현 완료

- **위치**: 우측 상단
- **구현 사양**:
  - 설정 아이콘 (24x24px)
  - 호버 시 투명도 변경 효과
- **표시 내용**:
  - 설정 아이콘 (`/images/items/button-setting.png`)
  - 클릭 시 설정 메뉴 모달 표시
  - ⚠️ **추후 추가 예정**: 기타 설정 옵션

---

## 3. 중앙 부분 (게임 진행 맵) ✅ 구현 완료

중앙 부분은 게임의 진행 상황을 시각적으로 보여주는 맵입니다. 여러 개의 투명한 카드들이 구불구불한 길을 따라 배치되어 있으며, **각 카드는 하나의 페이즈를 나타냅니다**.

### 3.1. 진행 방식 ✅ 구현 완료

- **시작 위치**: 가장 아래쪽 페이즈 카드부터 시작 (페이즈 1)
- **진행 방향**: 아래에서 위로 진행
- **잠금 해제 조건**: 실제 데이터베이스의 `currentPhase` 필드 기반
  - 첫 번째 페이즈의 모든 스테이지를 클리어해야 다음 페이즈가 잠금 해제됨
  - 순차적 진행 방식

### 3.2. 페이즈 카드 상태별 표시 ✅ 구현 완료

#### 3.2.1. 활성/진행 중인 페이즈

- **구현 사양**:
  - 블러 처리된 둥근 사각형 배경 (150x160px)
  - 배경: `bg-white/50 backdrop-blur-[10px]`
  - 그림자: `shadow-[0_2px_2px_0_rgba(0,0,0,0.4)]`
- **시각적 특징**:
  - 투명한 카드 배경
  - 페이즈별 아이콘이 명확하게 표시됨 (120x120px)
  - 각 페이즈 아이콘 위에 빨간색 십자가 표시 (의료 테마)
- **의미**: 현재 플레이 가능한 페이즈

#### 3.2.2. 잠금 상태의 페이즈

- **구현 사양**:
  - 동일한 블러 처리된 배경 (150x160px)
  - 잠금 아이콘 표시 (120x120px)
- **시각적 특징**:
  - 투명한 카드 배경
  - 잠금 아이콘 (`/images/items/icon-locked-phase.png`) 표시
  - 회색 톤으로 비활성화 상태 표현
- **의미**: 아직 플레이할 수 없는 페이즈

### 3.3. 페이즈 배치 및 연결선 ✅ 구현 완료

#### 3.3.1. 페이즈 배치

- **페이즈 1**: 화면 하단으로부터 20px, 우측으로부터 24px
- **페이즈 2**: 페이즈 1보다 위에 위치, 좌측으로부터 24px
- **페이즈 3**: 페이즈 2보다 위에 위치, 우측으로부터 24px
- **페이즈 4**: 페이즈 3보다 위에 위치, 좌측으로부터 24px

#### 3.3.2. 연결선 (Vector Images)

- **페이즈 1 → 페이즈 2**: `/images/ui/vector1.png` (170x60px)
- **페이즈 2 → 페이즈 3**: `/images/ui/vector2.png` (170x60px)
- **페이즈 3 → 페이즈 4**: `/images/ui/vector1.png` (170x60px)
- **레이어링**: 연결선은 페이즈 요소보다 뒤에 배치 (`z-0`)
- **투명도**: `opacity-80`으로 설정

### 3.4. 스크롤 기능 ✅ 구현 완료

- **스크롤 영역**: 메인 콘텐츠 영역 (`overflow-y-auto`)
- **고정 헤더**: 상단 헤더는 고정, 콘텐츠만 스크롤
- **초기 위치**: 페이지 로드 시 하단(페이즈 1)에 고정
- **새로고침 대응**: 새로고침 시에도 하단 위치 유지

---

## 4. 명확화된 사항

### 4.1. 페이즈와 스테이지의 관계 ✅

**확정 사항**:

- **각 건물 카드는 페이즈를 나타냅니다**
- 스테이지 UI는 별도로 제공될 예정
- 페이즈 클릭 시 스테이지 선택 화면으로 이동

**구조**:

```
메인 페이지 (페이즈 카드들)
  └─ 페이즈 1 클릭
      └─ 스테이지 1 (5문제)
      └─ 스테이지 2 (5문제)
      └─ 스테이지 3 (5문제)
      └─ 스테이지 4 (5문제)
      └─ 스테이지 5 (5문제)
```

---

### 4.2. "완료" 표시의 적용 범위 ✅

**확정 사항**:

- **페이즈 전체가 완료되었을 때 페이즈 카드에 "완료" 표시**
- 페이즈 내의 모든 스테이지를 클리어해야 "완료" 표시

**시각적 표현**:

- 초록색 체크마크
- "완료" 텍스트
- 건물 아이콘 흐릿 처리

---

### 4.3. "HOSPITAL" 텍스트의 의미 ✅

**확정 사항**:

- **페이즈 카드의 일부로 단순 UI 요소**
- 별도로 신경쓰지 않아도 됨
- 페이즈별로 다른 텍스트 라벨 표시 가능

---

### 4.4. 추가 논의 필요 사항 (추후 제공 예정)

다음 항목들은 추후에 추가로 제공될 예정입니다:

- ⏳ 하트 충전 광고 UI 디자인 및 동작
- ⏳ 페이즈 클릭 시 동작 (스테이지 선택 화면 이동)
- ⏳ 스테이지 UI 디자인
- ⏳ 페이즈별 테마 구분
- ⏳ 진행 상황 표시 방법
- ⏳ 스크롤 및 네비게이션
- ⏳ 페이즈 잠금 해제 시 시각적 연출
- ⏳ 레벨업 시 캐릭터 변화 연출

---

## 5. 구현 우선순위

### Phase 1: 기본 UI 구조 (우선순위 높음)

- [ ] 상단 Header UI (캐릭터, 하트, 포인트, 설정)
- [ ] 중앙 맵 레이아웃
- [ ] 페이즈 카드 기본 디자인
- [ ] 페이즈 카드 상태별 표시 (활성/잠금/완료)

### Phase 2: 인터랙션 (우선순위 중간)

- [ ] 페이즈 카드 클릭 이벤트
- [ ] 페이즈 → 스테이지 선택 화면 이동
- [ ] 하트 자동 충전 타이머
- [ ] 하트 부족 시 페이즈 진입 제한
- [ ] 설정 메뉴 (소리 ON/OFF)

### Phase 3: 고급 기능 (우선순위 낮음)

- [ ] 광고 충전 UI (추후 제공 예정)
- [ ] 페이즈 잠금 해제 애니메이션
- [ ] 페이즈 클리어 시 시각적 피드백
- [ ] 진행 상황 상세 표시

---

## 6. 스테이지 선택 페이지 (Stage Selection)

스테이지 선택 페이지는 사용자가 특정 페이즈 내에서 플레이할 스테이지를 선택하는 화면입니다.

### 6.1. 전체 구조

- **총 4개의 페이즈**: 보건소, 의원, 일반병원, 종합병원
- **각 페이즈당 5개의 스테이지**: 스테이지 1~5
- **배경 이미지**: 페이즈별로 테마 건물과 배경 이미지가 변경됨

### 6.2. 페이즈별 테마

각 페이즈는 상단에 위치한 다른 의료 기관 건물로 시각적으로 구분됩니다.

#### 6.2.1. 보건소 (Health Center)

- **건물**: 작고 아담한 단층 건물
- **특징**: 주황색 지붕, 연한 갈색 벽, 연한 하늘색 문
- **표시**: 중앙에 흰색 십자가

#### 6.2.2. 의원 (Clinic)

- **건물**: 2층 건물
- **특징**: 주황색 지붕, 연한 노란색 벽, 연한 하늘색 문과 창문
- **표시**: 중앙에 흰색 십자가

#### 6.2.3. 일반병원 (General Hospital)

- **건물**: 3층 건물
- **특징**: 주황색 지붕, 연한 하늘색 벽, 연한 하늘색 문과 여러 개의 창문
- **표시**: 중앙에 흰색 십자가

#### 6.2.4. 종합병원 (Comprehensive Hospital)

- **건물**: 4층 건물
- **특징**: 주황색 지붕, 연한 녹색 벽, 연한 하늘색 문과 가장 많은 창문
- **표시**: 중앙에 흰색 십자가

### 6.3. 배경 구성

#### 6.3.1. 배경 이미지 구조 ✅

- **제공 방식**: 페이즈별로 **테마 건물 + 주변 환경 요소가 모두 포함된 통합 배경 이미지**
- **이미지 구성 요소**:
  - 테마 건물 (상단)
  - 풍경 (푸른 잔디, 초록색 덤불)
  - 장식 (나무 벤치, 나무 표지판)
  - 경로 (구불구불한 노란색 길)
- **페이즈별 차이**: 각 페이즈마다 다른 테마 건물과 배경 이미지 제공
- **건물 분리**: 건물 이미지를 따로 제공하지 않음 (배경 이미지에 통합)

#### 6.3.2. 상단 UI

- **뒤로가기 버튼**: 좌측 상단 (메인 페이지로 복귀) ✅
- **시간**: 좌측 상단 (예: "9:41")
- **시스템 정보**: 우측 상단 (통신 신호, 배터리 아이콘)

### 6.4. 스테이지 마커

#### 6.4.1. 시각적 디자인

- **형태**: 파란색 테두리의 사각형 아이콘
- **위치**: 경로 위에 순차적으로 배치
- **크기**: 일정한 크기로 통일

#### 6.4.2. 스테이지 상태별 표시

**1. 잠금 해제된 스테이지 (진행 가능)**

- **표시**: 흰색 숫자 (예: "1", "2", "3")
- **인터랙션**: 클릭 가능
- **동작**: 클릭 시 퀴즈 풀이 페이지로 이동

**2. 잠금 상태 스테이지 (진행 불가)**

- **표시**: 흰색 자물쇠 아이콘
- **인터랙션**: 클릭 불가
- **동작**: 클릭 시 아무 반응 없음 ✅

**3. 클리어된 스테이지 (완료)**

- **표시**: 녹색 체크 표시 ✅
- **인터랙션**: 클릭 가능 (재도전)
- **동작**: 클릭 시 퀴즈 풀이 페이지로 이동 (재도전 모드)

### 6.5. 진행 시스템

#### 6.5.1. 스테이지 잠금 해제

- **조건**: 이전 스테이지를 성공적으로 클리어
- **기준**: 3문제 이상 정답 (스테이지 성공 기준)
- **순차적 진행**: 스테이지 1 → 2 → 3 → 4 → 5 순서로 진행

#### 6.5.2. 페이즈 전환

- **방식**: 메인 페이지에서 페이즈 선택 후 스테이지 페이지로 이동 ✅
- **조건**: 이전 페이즈의 모든 스테이지 클리어 ✅
- **진행 순서**: Phase 1 → Phase 2 → Phase 3 → Phase 4

### 6.6. 명확화된 사항 ✅

#### 6.6.1. 페이즈 구조

- ✅ 총 4개의 페이즈 (Phase 1, 2, 3, 4)
- ✅ 각 페이즈당 5개의 스테이지
- ✅ 페이즈 테마: 보건소, 의원, 일반병원, 종합병원
- ✅ 배경 이미지는 페이즈별로 변경됨
- ✅ 테마 건물은 페이즈별로 다르게 디자인됨
- ✅ 배경 이미지는 테마 건물 + 주변 환경 요소가 모두 포함된 통합 이미지
- ✅ 건물 이미지를 따로 제공하지 않음 (배경 이미지에 통합)

#### 6.6.2. 스테이지 진행

- ✅ 스테이지를 클리어하면 다음 스테이지 잠금 해제
- ✅ 순차적 진행 방식 (스테이지 1 → 2 → 3 → 4 → 5)
- ✅ 스테이지 클릭 시 퀴즈 풀이 페이지로 이동
- ✅ 클리어된 스테이지: 녹색 체크 표시
- ✅ 잠금 상태 스테이지 클릭 시: 아무 반응 없음

#### 6.6.3. 시각적 요소

- ✅ 잠금 해제된 스테이지: 흰색 숫자
- ✅ 잠금 상태 스테이지: 흰색 자물쇠 아이콘
- ✅ 경로: 구불구불한 노란색 길
- ✅ 배경: 푸른 잔디, 초록색 덤불, 나무 벤치, 나무 표지판

---

## 7. 퀴즈 풀이 페이지 (Quiz Solving Page)

퀴즈 풀이 페이지는 사용자가 스테이지를 진행하며 의료 상식 퀴즈를 푸는 핵심 화면입니다.

### 7.1. 전체 구조

- **배경**: 밝은 노란색 배경 (하단에는 나무 바닥 질감)
- **상단 헤더**: 게임 정보 및 시스템 시간 표시
- **중앙 퀴즈 영역**: 칠판 컴포넌트에 문제와 4개의 선택지 버튼
- **하단 아이템 바**: 퀴즈 진행을 돕는 4가지 아이템 버튼

### 7.2. 상단 헤더 (Top Header)

#### 7.2.1. 상단 UI (메인 페이지와 동일)

- **좌측 상단**:

  - **시간**: 현재 시간 표시 (예: "9:41")

- **중앙 상단**:
  - **캐릭터 레벨**: 캐릭터 아이콘과 현재 레벨 (예: "Lv.20")
  - **하트/생명**: 빨간색 하트 아이콘과 남은 하트 수 (예: "5")
  - **하트 회복 타이머**: 하트 아이콘 옆에 표시되는 타이머 (예: "4분12초")
    - 다음 하트 회복까지 남은 시간 ✅
  - **점수**: 노란색 별 아이콘과 보유 점수 (예: "10,200")
    - 누적된 총 점수 (아이템 사용을 위해) ✅
  - **설정 버튼**: 톱니바퀴 아이콘
    - 하위 메뉴: "나가기" 옵션 포함 ✅
    - 나가기 클릭 시: 퀴즈 중단 및 스테이지 선택 페이지로 이동

#### 7.2.2. 스테이지 진행 표시

- **위치**: 헤더 하단
- **스테이지 정보**: 페이즈와 스테이지 정보 (예: "Stage 2-3")
- **진행률 프로그래스바**:
  - 5칸으로 나누어진 프로그래스바
  - 한 칸씩 채워나가는 방식 ✅
  - 현재 진행 중인 문제 번호 표시 (예: 5문제 중 2번째 문제 = 2칸 채워짐)

### 7.3. 중앙 퀴즈 영역 (Quiz Area)

#### 7.3.1. 칠판 컴포넌트

- **디자인**: 나무 프레임의 녹색 칠판 이미지 (`blackboard.png`) ✅
- **문제 텍스트**: 칠판 중앙에 흰색 글씨로 문제 제시
  - **문제 카테고리**: 대괄호로 묶인 카테고리 (예: "[화상·일광화상]")
  - **문제 내용**: 구체적인 질문 (예: "가벼운 열탕·접촉 화상 직후 가장 먼저 할 일은?")
- **칠판 지우개**: 칠판 프레임 하단에 흰색 지우개 이미지 (장식용)

#### 7.3.2. 선택지 버튼

- **개수**: 4개의 파란색 직사각형 버튼
- **텍스트**: 각 버튼에 선택지 내용 표시
- **인터랙션**:
  - 하나의 선택지만 선택 가능
  - 버튼 클릭 시 문제 결과(정답/오답) 페이지로 이동 ✅
  - 문제 결과 페이지는 추후 제공 예정

### 7.4. 하단 아이템 바 (Bottom Item Bar)

- **아이템 개수**: 4가지 아이템 버튼
- **아이템 목록**:
  1. **오답 지우기**: 지우개 아이콘 (회색)
  2. **힌트**: 전구 아이콘 (노란색)
  3. **점수 2배**: 동전(P x2) 아이콘 (노란색)
  4. **자동정답**: 체크마크 아이콘 (회색)

#### 7.4.1. 아이템 활성화 조건

- **보유 포인트에 따라 사용 활성화/비활성화 적용**
- **시각적 표현**:
  - 활성화: 색이 있는 버전 (원본 아이콘)
  - 비활성화: 회색 처리된 버전 ✅
  - 두 가지 버전 모두 제공됨

#### 7.4.2. 아이템 사용 효과 및 포인트 차감

- **오답 지우기**:
  - 효과: 4개 선택지 중 1개 제거 ✅
  - 포인트: 50점 차감
- **점수 2배**:
  - 효과: 해당 문제 정답 시 점수 2배
  - 포인트: 100점 차감
- **자동 정답**:
  - 효과: 자동으로 정답 선택
  - 포인트: 200점 차감
- **힌트 제공**:
  - 효과: 힌트 모달창 표시 (추후 제공 예정) ✅
  - 포인트: 80점 차감

### 7.5. 명확화된 사항 ✅

#### 7.5.1. UI 구성

- ✅ **상단 헤더**: 레벨, 하트, 점수, 설정 버튼 (메인 페이지와 동일)
- ✅ **설정 버튼 하위 메뉴**: "나가기" 옵션 포함
- ✅ **스테이지 진행 표시**: 페이즈와 스테이지 정보 (예: "Stage 2-3") + 5칸 프로그래스바
- ✅ **중앙 퀴즈 영역**: 칠판 컴포넌트 + 문제 텍스트 + 4개 선택지
- ✅ **하단 아이템 바**: 4가지 아이템 (오답 지우기, 힌트, 점수 2배, 자동정답)
- ✅ **배경**: 밝은 노란색 배경 (나무 바닥 질감)

#### 7.5.2. 아이템 시스템

- ✅ **아이템 개수**: 4가지
- ✅ **활성화 조건**: 보유 포인트에 따라 사용 활성화/비활성화
- ✅ **시각적 표현**: 색이 있는 버전 (활성화) / 회색 처리된 버전 (비활성화)
- ✅ **선택지**: 하나의 선택지만 선택 가능
- ✅ **선택지 버튼 클릭**: 문제 결과(정답/오답) 페이지로 이동
- ✅ **점수 표시**: 보유 점수 (누적 총 점수) - 아이템 사용을 위해

### 7.6. 문제 결과 페이지 (Quiz Result Page)

문제 결과 페이지는 사용자가 선택한 답안에 대한 피드백을 제공하는 화면입니다.

#### 7.6.1. 전체 구조

- **정답 페이지**: 밝은 노란색 배경, 축하 애니메이션
- **오답 페이지**: 연한 주황색/복숭아색 배경, 오답 애니메이션
- **공통 요소**: 칠판 컴포넌트, 캐릭터 이미지, 사용자 선택지 버튼

#### 7.6.2. 정답 페이지 (Correct Answer)

##### 7.6.2.1. 배경 및 애니메이션

- **배경**: 밝은 노란색 배경
- **애니메이션 효과**: 폭죽 터지는 애니메이션 ✅
  - 빨강, 노랑, 파랑, 초록 색종이
  - 흰색 반짝임 효과
  - 칠판 주변에 집중적으로 표시

##### 7.6.2.2. 칠판 컴포넌트

- **위치**: 화면 상단 중앙
- **디자인**: 녹색 칠판 + 나무 프레임
- **텍스트**:
  - "정답입니다!" (흰색 글씨)
  - 정답 텍스트 (흰색 글씨)
- **버튼**: "다음 문제 >" 버튼 (파란색, 흰색 테두리)
  - ⚠️ **정해야 할 사항**: 버튼 클릭 시 동작
  - 옵션 A: 자동으로 다음 문제로 전환 (버튼 없음)
  - 옵션 B: 버튼 클릭 시 다음 문제로 전환
  - 옵션 C: 2초 후 자동 전환 + 버튼 클릭으로 즉시 전환

##### 7.6.2.3. 캐릭터 이미지

- **위치**: 화면 하단 중앙
- **캐릭터**: 사용자의 슈퍼히어로 캐릭터
- **포즈**: 손을 허리에 대고 서 있는 자세
- **의상**: 파란색 슈퍼히어로 슈트, 빨간 망토, 빨간 부츠, 노란 벨트

##### 7.6.2.4. 사용자 선택지 버튼

- **위치**: 화면 최하단
- **디자인**: 초록색 직사각형 버튼 (둥근 모서리)
- **텍스트**: 사용자가 선택한 정답 선택지
- **인터랙션**: 클릭 불가 (표시용만) ✅

#### 7.6.3. 오답 페이지 (Incorrect Answer)

##### 7.6.3.1. 배경 및 애니메이션

- **배경**: 연한 주황색/복숭아색 배경
- **애니메이션 효과**: 빨갛게 화면 전체가 반짝이는 애니메이션 ✅
  - 반투명 빨간 십자가 패턴
  - 전체 화면에 흩뿌려진 효과

##### 7.6.3.2. 칠판 컴포넌트

- **위치**: 화면 상단 중앙
- **디자인**: 녹색 칠판 + 나무 프레임
- **텍스트**:
  - "아쉽네요! 정답은," (흰색 글씨)
  - 정답 텍스트 (흰색 글씨)
- **버튼**: "다음 문제 >" 버튼 (파란색, 흰색 테두리)
  - ⚠️ **정해야 할 사항**: 버튼 클릭 시 동작 (정답 페이지와 동일)

##### 7.6.3.3. 캐릭터 이미지

- **위치**: 화면 하단 중앙
- **캐릭터**: 사용자의 슈퍼히어로 캐릭터 (정답 페이지와 동일)
- **포즈**: 손을 허리에 대고 서 있는 자세
- **의상**: 파란색 슈퍼히어로 슈트, 빨간 망토, 빨간 부츠, 노란 벨트

##### 7.6.3.4. 사용자 선택지 버튼

- **위치**: 화면 최하단
- **디자인**: 빨간색 직사각형 버튼 (둥근 모서리)
- **텍스트**: 사용자가 선택한 오답 선택지
- **인터랙션**: 클릭 불가 (표시용만) ✅

#### 7.6.4. 공통 요소

##### 7.6.4.1. 상단 바

- **시간**: 좌측 상단 (예: "9:41")
- **결과 표시**: 좌측 상단 (예: "정답" 또는 "오답")
- **시스템 정보**: 우측 상단 (통신 신호, 배터리 아이콘)

##### 7.6.4.2. 다음 문제 전환

- ⚠️ **정해야 할 사항**: 다음 문제 전환 방식
  - 옵션 A: 자동 전환 (2-3초 후)
  - 옵션 B: 버튼 클릭으로 전환
  - 옵션 C: 자동 전환 + 버튼 클릭으로 즉시 전환

##### 7.6.4.3. 마지막 문제 처리

- ⚠️ **정해야 할 사항**: 마지막 문제(5번째) 결과 페이지에서 다음 문제 버튼 동작
  - 옵션 A: "다음 문제 >" → "결과 보기 >" 버튼으로 변경
  - 옵션 B: "다음 문제 >" 버튼 클릭 시 결과 화면으로 이동
  - 옵션 C: 자동으로 결과 화면으로 이동

#### 7.6.5. 명확화된 사항 ✅

##### 7.6.5.1. UI 구성

- ✅ **정답 페이지**: 밝은 노란색 배경 + 폭죽 애니메이션
- ✅ **오답 페이지**: 연한 주황색 배경 + 빨간 십자가 애니메이션
- ✅ **칠판 컴포넌트**: 정답/오답 피드백 텍스트 + 정답 텍스트 + "다음 문제 >" 버튼
- ✅ **캐릭터 이미지**: 사용자의 슈퍼히어로 캐릭터
- ✅ **사용자 선택지 버튼**: 초록색(정답) / 빨간색(오답), 클릭 불가

##### 7.6.5.2. 애니메이션 효과

- ✅ **정답 애니메이션**: 폭죽 터지는 효과 (색종이 + 반짝임)
- ✅ **오답 애니메이션**: 빨갛게 화면 전체가 반짝이는 효과 (십자가 패턴)
- ✅ **애니메이션 지속 시간**: 2초 ✅

##### 7.6.5.3. 게임 진행 시스템

- ✅ **다음 문제 전환**: 2-3초 후 자동 전환 + 버튼 클릭으로 즉시 전환 ✅
- ✅ **마지막 문제 처리**: "다음 문제 >" → "결과 보기 >" 버튼으로 변경 ✅
- ✅ **스테이지 결과 UI**: 스테이지 결과 페이지로 이동
- ✅ **하트 소모**:
  - 스테이지 시작 시 -1
  - 오답 선택 시 추가 -1
  - 하트 0 시 광고 충전/나가기 모달창 표시 (추후 제공 예정) ✅
- ✅ **점수 획득**: 스테이지 결과 페이지에서 제공 ✅
- ✅ **아이템 사용**: 선택지 버튼 클릭 전에만 사용 가능 ✅
- ✅ **뒤로가기**: 문제 풀이 시 뒤로가기 없음 (설정 버튼에서 나가기 가능) ✅

### 7.7. 스테이지 결과 페이지 (Stage Result Page)

스테이지 결과 페이지는 사용자가 스테이지를 완료한 후 보상을 받는 화면입니다.

#### 7.7.1. 전체 구조

- **배경**: 블러 처리된 스테이지 선택 화면 배경
- **팝업 윈도우**: 중앙에 위치한 결과 팝업
- **결과 종류**: 스테이지 성공 / 스테이지 실패

#### 7.7.2. 스테이지 성공 페이지

##### 7.7.2.1. 팝업 윈도우

- **위치**: 화면 중앙
- **디자인**: 직사각형 팝업 윈도우

##### 7.7.2.2. 헤더

- **디자인**: 연한 갈색 나무 질감
- **텍스트**: "스테이지 성공!" (노란색, 굵게)
- **위치**: 팝업 상단

##### 7.7.2.3. 본문

- **디자인**: 연한 초록색 테두리, 연한 노란색 배경
- **보상 섹션**:
  - "보상" 텍스트
  - **EXP 아이콘**: 초록색 원형 아이콘, "EXP" 텍스트 (흰색)
    - 획득 경험치: +150
  - **별 아이콘**: 노란색 별 아이콘
    - 획득 점수: +150

##### 7.7.2.4. 버튼

- **디자인**: 파란색 버튼 (반짝이는 효과)
- **텍스트**: "보상 받기" (흰색, 굵게)
- **동작**: 클릭 시 스테이지 선택 페이지로 이동 ✅

#### 7.7.3. 스테이지 실패 페이지

##### 7.7.3.1. 팝업 윈도우

- **위치**: 화면 중앙
- **디자인**: 직사각형 팝업 윈도우

##### 7.7.3.2. 헤더

- **디자인**: 연한 갈색 나무 질감
- **텍스트**: "스테이지 실패!" (노란색, 굵게)
- **위치**: 팝업 상단

##### 7.7.3.3. 본문

- **디자인**: 주황색 테두리, 연한 노란색 배경
- **보상 섹션**:
  - "보상" 텍스트
  - **EXP 아이콘**: 초록색 원형 아이콘, "EXP" 텍스트 (흰색)
    - 획득 경험치: +50 (성공보다 적음)
  - **별 아이콘**: 노란색 별 아이콘
    - 획득 점수: +50 (성공보다 적음)

##### 7.7.3.4. 버튼

- **디자인**: 파란색 버튼 (반짝이는 효과)
- **텍스트**: "보상 받기" (흰색, 굵게)
- **동작**: 클릭 시 스테이지 선택 페이지로 이동 ✅

#### 7.7.4. 공통 요소

##### 7.7.4.1. 배경

- **블러 처리**: 스테이지 선택 화면 배경이 블러 처리됨
- **팝업 중앙 배치**: 결과 팝업이 화면 중앙에 위치

##### 7.7.4.2. 보상 시스템

- **성공 시 보상**:
  - EXP: +150
  - 점수: +150
- **실패 시 보상**:
  - EXP: +50
  - 점수: +50

##### 7.7.4.3. 네비게이션

- **보상 받기 버튼**: 클릭 시 스테이지 선택 페이지로 이동 ✅
- **자동 진행**: 버튼 클릭 없이 자동 진행 없음

#### 7.7.5. 명확화된 사항 ✅

##### 7.7.5.1. UI 구성

- ✅ **팝업 윈도우**: 중앙 배치, 나무 질감 헤더
- ✅ **성공 페이지**: 연한 초록색 테두리, "스테이지 성공!" 텍스트
- ✅ **실패 페이지**: 주황색 테두리, "스테이지 실패!" 텍스트
- ✅ **보상 표시**: EXP 아이콘 + 별 아이콘
- ✅ **버튼**: "보상 받기" 버튼 (파란색, 반짝이는 효과)

##### 7.7.5.2. 보상 시스템

- ✅ **성공 보상**: EXP +150, 점수 +150
- ✅ **실패 보상**: EXP +50, 점수 +50

##### 7.7.5.3. 네비게이션

- ✅ **보상 받기 버튼**: 스테이지 선택 페이지로 이동
- ✅ **배경**: 블러 처리된 스테이지 선택 화면

### 7.8. 설정 메뉴 (Settings Menu)

설정 메뉴는 퀴즈 풀이 페이지 상단의 설정 버튼을 클릭했을 때 표시되는 드롭다운 메뉴입니다.

#### 7.8.1. 전체 구조

- **배경**: 퀴즈 풀이 화면이 블러 처리됨
- **드롭다운 메뉴**: 우측 상단에서 아래로 3개의 원형 버튼이 드롭다운됨
- **위치**: 우측 상단

#### 7.8.2. 드롭다운 메뉴 버튼

##### 7.8.2.1. 음소거 버튼

- **디자인**: 흰색 원형 버튼
- **아이콘**: 스피커 아이콘 (갈색)
- **기능**: 음소거 ON/OFF
- **위치**: 가장 위

##### 7.8.2.2. 아이템 설명 버튼

- **디자인**: 흰색 원형 버튼
- **아이콘**: 전구 아이콘 (갈색)
- **기능**: 아이템 설명 표시
- **위치**: 중간

##### 7.8.2.3. 나가기 버튼

- **디자인**: 빨간색 원형 버튼
- **아이콘**: 왼쪽 화살표 아이콘 (흰색)
- **기능**: 퀴즈 중단 및 스테이지 선택 페이지로 이동
- **위치**: 가장 아래

#### 7.8.3. 명확화된 사항 ✅

##### 7.8.3.1. UI 구성

- ✅ **배경**: 퀴즈 풀이 화면 블러 처리
- ✅ **드롭다운 메뉴**: 우측 상단에서 아래로 3개 원형 버튼
- ✅ **버튼 순서**: 음소거 → 아이템 설명 → 나가기

##### 7.8.3.2. 버튼 디자인

- ✅ **음소거 버튼**: 흰색 원형, 스피커 아이콘
- ✅ **아이템 설명 버튼**: 흰색 원형, 전구 아이콘
- ✅ **나가기 버튼**: 빨간색 원형, 왼쪽 화살표 아이콘

##### 7.8.3.3. 기능

- ✅ **음소거**: 음소거 ON/OFF
- ✅ **아이템 설명**: 아이템 설명 모달창 표시
- ✅ **나가기**: 퀴즈 중단 및 스테이지 선택 페이지로 이동

### 7.9. 아이템 설명 모달창 (Item Description Modal)

아이템 설명 모달창은 설정 메뉴의 아이템 설명 버튼을 클릭했을 때 표시되는 모달창입니다.

#### 7.9.1. 전체 구조

- **배경**: 퀴즈 풀이 화면이 블러 처리됨
- **모달창**: 중앙에 위치한 직사각형 모달창
- **디자인**: 나무 질감 헤더 + 연한 초록색 테두리 + 크림색 배경

#### 7.9.2. 모달창 구성

##### 7.9.2.1. 헤더

- **디자인**: 연한 갈색 나무 질감
- **텍스트**: "아이템 사용법" (흰색)
- **위치**: 모달창 상단

##### 7.9.2.2. 본문

- **디자인**: 연한 초록색 테두리, 크림색 배경
- **구성 요소**:
  - **좌우 화살표 버튼**: 회색 원형 버튼 (좌우 슬라이드 가능) ✅
  - **아이템 이미지**: 정사각형 아이콘
  - **설명 텍스트**: 아이템 기능 설명 (한 줄)
  - **소모 점수**: 파란색 버튼, 노란색 별 아이콘 + 점수 (클릭 불가) ✅

##### 7.9.2.3. 닫기 버튼

- **위치**: 우측 상단
- **디자인**: X 버튼
- **기능**: 모달창 닫기

#### 7.9.3. 아이템 목록

##### 7.9.3.1. 오답제거

- **이미지**: 지우개 아이콘 (갈색, 흰색, 빨간 X 표시)
- **설명**: "보기 중 오답 하나를 제거합니다."
- **소모 점수**: ★ 50

##### 7.9.3.2. 힌트제공

- **이미지**: 전구 아이콘 (노란색, 흰색 반짝임)
- **설명**: "현재 문제의 힌트를 제공합니다."
- **소모 점수**: ★ 80

##### 7.9.3.3. 점수2배

- **이미지**: 원형 아이콘 (P + 2, 노란색 반짝임)
- **설명**: "정답 시 점수를 2배로 지급합니다."
- **소모 점수**: ★ 100

##### 7.9.3.4. 자동정답

- **이미지**: 체크마크 아이콘 (초록색, 노란색 반짝임)
- **설명**: "자동으로 정답을 알려줍니다."
- **소모 점수**: ★ 200

#### 7.9.4. 명확화된 사항 ✅

##### 7.9.4.1. UI 구성

- ✅ **배경**: 퀴즈 풀이 화면 블러 처리
- ✅ **모달창**: 중앙 배치, 나무 질감 헤더
- ✅ **제목**: "아이템 사용법"
- ✅ **좌우 화살표**: 슬라이드로 다른 아이템 확인 가능 ✅
- ✅ **닫기 버튼**: 우측 상단 X 버튼

##### 7.9.4.2. 아이템 표시

- ✅ **아이템 이미지**: 정사각형 아이콘
- ✅ **설명 텍스트**: 한 줄 설명
- ✅ **소모 점수**: 파란색 버튼, 별 아이콘 + 점수 (클릭 불가)

##### 7.9.4.3. 아이템 목록

- ✅ **오답제거**: ★ 50
- ✅ **힌트제공**: ★ 80
- ✅ **점수2배**: ★ 100
- ✅ **자동정답**: ★ 200

### 7.10. 나가기 모달창 (Exit Modal)

나가기 모달창은 설정 메뉴의 나가기 버튼을 클릭했을 때 표시되는 확인 모달창입니다.

#### 7.10.1. 전체 구조

- **배경**: 퀴즈 풀이 화면이 블러 처리됨
- **모달창**: 중앙에 위치한 직사각형 모달창
- **디자인**: 나무 질감 헤더 + 주황색/빨간색 테두리 + 주황색 배경

#### 7.10.2. 모달창 구성

##### 7.10.2.1. 헤더

- **디자인**: 연한 갈색 나무 질감
- **텍스트**: "종료할까요?" (검은색, 굵게, 흰색 테두리)
- **위치**: 모달창 상단

##### 7.10.2.2. 본문

- **디자인**: 주황색/빨간색 테두리, 주황색 배경
- **구성 요소**:
  - **하트 아이콘**: 큰 빨간색 하트 아이콘 (반짝이는 효과)
    - 하트 안에 "-1" 표시 (흰색)
  - **경고 텍스트**: "지금 나가면 하트를 잃게 돼요!" (검은색, 굵게)
  - **나가기 버튼**: 파란색 직사각형 버튼 (둥근 모서리, 그라데이션 효과)
    - 텍스트: "나가기" (흰색, 굵게)
    - 동작: 스테이지 종료 및 스테이지 선택 페이지로 이동 ✅

##### 7.10.2.3. 닫기 버튼

- **위치**: 우측 상단
- **디자인**: X 버튼
- **기능**: 모달창 닫기 ✅

#### 7.10.3. 나가기 동작

##### 7.10.3.1. 스테이지 종료

- **하트 소모**: -1
- **점수 획득**: 없음 (문제를 풀면서 획득한 점수 미획득) ✅
- **경험치 획득**: 없음 (문제를 풀면서 획득한 경험치 미획득) ✅

##### 7.10.3.2. 페이지 이동

- **목적지**: 스테이지 선택 페이지로 이동
- **진행 상황**: 저장되지 않음

#### 7.10.4. 명확화된 사항 ✅

##### 7.10.4.1. UI 구성

- ✅ **배경**: 퀴즈 풀이 화면 블러 처리
- ✅ **모달창**: 중앙 배치, 나무 질감 헤더
- ✅ **제목**: "종료할까요?"
- ✅ **하트 소모 표시**: -1 하트
- ✅ **경고 텍스트**: "지금 나가면 하트를 잃게 돼요!"
- ✅ **나가기 버튼**: 파란색 버튼, "나가기" 텍스트
- ✅ **닫기 버튼**: 우측 상단 X 버튼

##### 7.10.4.2. 나가기 동작

- ✅ **하트 소모**: -1
- ✅ **점수/경험치**: 획득하지 못함
- ✅ **페이지 이동**: 스테이지 선택 페이지로 이동

### 7.11. 하트 부족 모달창 (Heart Shortage Modal)

하트 부족 모달창은 문제 풀이 중 하트가 부족한 경우에 표시되는 모달창입니다.

#### 7.11.1. 전체 구조

- **배경**: 퀴즈 풀이 화면이 블러 처리됨
- **모달창**: 중앙에 위치한 칠판 형태의 모달창
- **디자인**: 녹색 칠판 + 노란색-주황색 나무 프레임

#### 7.11.2. 모달창 구성

##### 7.11.2.1. 칠판 모달창

- **디자인**: 녹색 칠판 + 두꺼운 노란색-주황색 나무 프레임 (둥근 모서리)
- **위치**: 화면 중앙

##### 7.11.2.2. 메시지

- **텍스트**:
  - "이런," (흰색, 칠판 글씨체)
  - "퀴즈를 풀기 위한 하트가 부족해요!" (흰색, 칠판 글씨체)
- **위치**: 칠판 상단

##### 7.11.2.3. 하트 상태

- **하트 아이콘**: 큰 빨간색 하트 아이콘 (반짝이는 효과, 3D 스타일)
  - 하트 안에 "0" 표시 (흰색)
- **타이머**: 알람 시계 아이콘 + "4분12초" (하트 회복까지 남은 시간) ✅
- **위치**: 칠판 중앙

##### 7.11.2.4. 하트 획득 버튼

###### 광고 시청 버튼

- **디자인**: 밝은 파란색 직사각형 버튼 (둥근 모서리)
- **아이콘**: 재생 아이콘 (흰색 삼각형, 오른쪽 화살표)
- **텍스트**: "하트 받기" (흰색, 굵게)
- **기능**: 광고 시청 후 하트 1개 획득 ✅
- **위치**: 좌측

###### 포인트 소모 버튼

- **디자인**: 밝은 파란색 직사각형 버튼 (둥근 모서리)
- **아이콘**: 노란색 별 아이콘
- **텍스트**: "500" (흰색, 굵게)
- **기능**: 500 포인트 소모로 하트 1개 획득 ✅
- **위치**: 우측

##### 7.11.2.5. 장식 요소

- **칠판 지우개**: 나무 프레임 하단 우측에 노란색-주황색 사각형 지우개 모양 장식

#### 7.11.3. 명확화된 사항 ✅

##### 7.11.3.1. UI 구성

- ✅ **배경**: 퀴즈 풀이 화면 블러 처리
- ✅ **모달창**: 칠판 형태 (녹색 칠판 + 노란색-주황색 나무 프레임)
- ✅ **메시지**: "이런, 퀴즈를 풀기 위한 하트가 부족해요!"
- ✅ **하트 표시**: 빨간색 하트 아이콘 + "0" 표시
- ✅ **타이머**: 알람 시계 아이콘 + "4분12초" (하트 회복까지 남은 시간)
- ✅ **하트 획득 버튼**: 광고 시청 / 포인트 소모 (500점)

##### 7.11.3.2. 하트 획득 방법

- ✅ **광고 시청**: "하트 받기" 버튼 클릭 → 광고 시청 → 하트 1개 획득
- ✅ **포인트 소모**: "500" 버튼 클릭 → 500 포인트 소모 → 하트 1개 획득

##### 7.11.3.3. 타이머 표시

- ✅ **타이머**: 다음 하트 회복까지 남은 시간 (예: "4분12초")

##### 7.11.3.4. 하트 획득 후 동작

- ✅ **하트 획득 후**: "하트를 획득했습니다!" 메시지 표시 후 자동으로 모달창 닫힘 ✅
- ✅ **페이지 복귀**: 퀴즈 풀이 페이지로 자동 복귀 ✅

##### 7.11.3.5. 광고 시청 시스템

- ✅ **광고 시청 실패 시**: 모달창 유지 (다시 시도 가능) ✅
- ✅ **일일 제한**: 광고 시청 일일 5회 제한 ✅

##### 7.11.3.6. 포인트 부족 시 처리

- ✅ **포인트 부족 시**: 포인트 표시 버튼이 "나가기" 버튼으로 변경 ✅
- ✅ **나가기 버튼**: 스테이지 선택 페이지로 이동

##### 7.11.3.7. 모달창 표시 시점

- ✅ **하트 0 시**: 문제 풀이 중 하트가 0이 되면 모달창 표시
- ✅ **스테이지 진입 시**: 스테이지 진입 시 하트가 부족하면 모달창 표시 ✅

### 7.12. 아이템 사용 모달창 (Item Use Modal)

아이템 사용 모달창은 사용자가 아이템 버튼을 클릭했을 때 표시되는 확인 모달창입니다.

#### 7.12.1. 전체 구조

- **배경**: 퀴즈 풀이 화면이 블러 처리됨
- **상단 UI**: 레벨, 하트, 점수, 설정 버튼 표시 유지 ✅
- **모달창**: 중앙에 위치한 직사각형 모달창
- **디자인**: 나무 질감 헤더 + 연한 초록색 테두리 + 크림색 배경

#### 7.12.2. 모달창 구성

##### 7.12.2.1. 헤더

- **디자인**: 연한 갈색 나무 질감
- **텍스트**: "아이템 사용" (검은색, 굵게)
- **위치**: 모달창 상단

##### 7.12.2.2. 본문

- **디자인**: 연한 초록색 테두리, 크림색 배경
- **구성 요소**:
  - **아이템 아이콘**: 정사각형 아이콘 (둥근 모서리)
    - 예: 지우개 아이콘 (갈색, 흰색, 빨간 X 표시, 반짝임 효과)
  - **아이템 설명 텍스트**: 아이템 기능 설명 (한 줄)
    - 예: "보기 중 오답 하나를 제거합니다."
  - **사용 포인트 버튼**: 파란색 직사각형 버튼 (둥근 모서리)
    - 아이콘: 노란색 별 아이콘
    - 텍스트: 점수 (예: "50")
    - 동작: 클릭 시 아이템 사용 ✅

##### 7.12.2.3. 체크박스 옵션

- **위치**: 모달창 하단
- **체크박스**: 흰색 사각형 체크박스
- **텍스트**: "다음 사용부터 팝업 표시 안 함" (검은색)
- **기능**: 체크 시 다음부터는 아이템 버튼 클릭 시 바로 아이템 사용 ✅
- **아이템별 설정**: 각 아이템별로 다음부터 표시하지 않는지 여부를 설정 ✅

#### 7.12.3. 아이템별 동작

##### 7.12.3.1. 오답제거 아이템

- **아이콘**: 지우개 아이콘 (갈색, 흰색, 빨간 X 표시)
- **설명**: "보기 중 오답 하나를 제거합니다."
- **포인트**: 50점
- **체크박스 체크 시**: 다음에 오답제거 아이템 사용 시 모달창 표시 안 함 ✅

##### 7.12.3.2. 힌트제공 아이템

- **아이콘**: 전구 아이콘 (노란색, 흰색 반짝임)
- **설명**: "현재 문제의 힌트를 제공합니다."
- **포인트**: 80점
- **체크박스 체크 시**: 다음에 힌트제공 아이템 사용 시 모달창 표시 안 함 ✅

##### 7.12.3.3. 점수2배 아이템

- **아이콘**: 원형 아이콘 (P + 2, 노란색 반짝임)
- **설명**: "정답 시 점수를 2배로 지급합니다."
- **포인트**: 100점
- **체크박스 체크 시**: 다음에 점수2배 아이템 사용 시 모달창 표시 안 함 ✅

##### 7.12.3.4. 자동정답 아이템

- **아이콘**: 체크마크 아이콘 (초록색, 노란색 반짝임)
- **설명**: "자동으로 정답을 알려줍니다."
- **포인트**: 200점
- **체크박스 체크 시**: 다음에 자동정답 아이템 사용 시 모달창 표시 안 함 ✅

#### 7.12.4. 명확화된 사항 ✅

##### 7.12.4.1. UI 구성

- ✅ **배경**: 퀴즈 풀이 화면 블러 처리
- ✅ **상단 UI**: 레벨, 하트, 점수, 설정 버튼 표시 유지
- ✅ **모달창**: 중앙 배치, 나무 질감 헤더
- ✅ **제목**: "아이템 사용"
- ✅ **아이템 아이콘**: 정사각형 아이콘 (둥근 모서리)
- ✅ **아이템 설명**: 한 줄 설명 텍스트
- ✅ **사용 포인트 버튼**: 파란색 버튼, 별 아이콘 + 점수 (클릭 시 사용)
- ✅ **체크박스 옵션**: "다음 사용부터 팝업 표시 안 함"

##### 7.12.4.2. 체크박스 기능

- ✅ **체크 시**: 다음부터는 아이템 버튼 클릭 시 바로 아이템 사용
- ✅ **아이템별 설정**: 각 아이템별로 독립적으로 설정
- ✅ **예시**: 오답제거 아이템 체크 → 오답제거만 모달창 표시 안 함, 다른 아이템은 표시됨

##### 7.12.4.3. 아이템 목록

- ✅ **오답제거**: 50점
- ✅ **힌트제공**: 80점
- ✅ **점수2배**: 100점
- ✅ **자동정답**: 200점

##### 7.12.4.4. 아이템 사용 시스템

- ✅ **아이템 사용 후**: 자동으로 모달창 닫힘 ✅
- ✅ **체크박스 기본 상태**: 체크 안 됨 (기본값) ✅
- ✅ **체크박스 설정 저장**: Supabase에 저장 (계정별) ✅
- ✅ **아이템 사용 제한**: 문제당 한 번만 하나만 사용 가능 ✅

##### 7.12.4.5. 아이템 효과

- ✅ **오답제거**: 정답을 제외한 나머지 3개의 선택지 중 하나를 랜덤하게 삭제 ✅
- ✅ **힌트제공**: 힌트 모달창 표시 ✅
- ✅ **점수2배**: 점수 2배 아이템 버튼에 활성화 표시(노란 테두리 등) 및 나머지 아이템은 회색으로 변경 ✅
- ✅ **자동정답**: 문제 결과 페이지(정답)로 바로 이동 ✅

##### 7.12.4.6. 포인트 부족 시 처리

- ✅ **포인트 부족 시**: 아이템 버튼 비활성화(회색) ✅

### 7.13. 힌트 모달창 (Hint Modal)

힌트 모달창은 힌트 아이템을 사용했을 때 표시되는 모달창입니다.

#### 7.13.1. 전체 구조

- **배경**: 퀴즈 풀이 화면이 블러 처리됨
- **상단 UI**: 레벨, 하트, 점수, 설정 버튼 표시 유지 ✅
- **모달창**: 중앙에 위치한 직사각형 모달창
- **디자인**: 나무 질감 헤더 + 연한 초록색 테두리 + 크림색 배경

#### 7.13.2. 모달창 구성

##### 7.13.2.1. 헤더

- **디자인**: 연한 갈색 나무 질감
- **텍스트**: "힌트" (검은색, 굵게)
- **위치**: 모달창 상단

##### 7.13.2.2. 본문

- **디자인**: 연한 초록색 테두리, 크림색 배경
- **구성 요소**:
  - **힌트 텍스트**: 현재 문제의 힌트 내용 (한 줄 또는 여러 줄)
  - **닫기 버튼**: 파란색 직사각형 버튼 (둥근 모서리)
    - 텍스트: "닫기" (흰색, 굵게)
    - 동작: 모달창 닫기 ✅

#### 7.13.3. 명확화된 사항 ✅

##### 7.13.3.1. UI 구성

- ✅ **배경**: 퀴즈 풀이 화면 블러 처리
- ✅ **상단 UI**: 레벨, 하트, 점수, 설정 버튼 표시 유지
- ✅ **모달창**: 중앙 배치, 나무 질감 헤더
- ✅ **제목**: "힌트"
- ✅ **힌트 텍스트**: 현재 문제의 힌트 내용
- ✅ **닫기 버튼**: 파란색 버튼, "닫기" 텍스트

##### 7.13.3.2. 힌트 시스템

- ✅ **힌트 아이템 사용**: 힌트 아이템 사용 시 모달창 표시
- ✅ **힌트 내용**: 현재 문제에 대한 힌트 텍스트
- ✅ **닫기 동작**: 닫기 버튼 클릭 시 모달창 닫힘

---

## 8. 정해야 할 사항 및 애매한 부분 ⚠️

### 8.1. 배경 이미지 변경 범위 ✅

**결정 완료**:

- ✅ **배경 이미지**: 테마 건물 + 주변 환경 요소가 모두 포함된 통합 이미지
- ✅ **제공 방식**: 페이즈별로 완성된 배경 이미지 제공
- ✅ **건물 분리**: 건물 이미지를 따로 제공하지 않음
- ✅ **구현 방식**: 각 페이즈마다 다른 배경 이미지를 배경으로 사용

### 8.2. 페이즈 명칭 및 표시 ✅

**결정 완료**:

- ✅ **페이즈 명칭**: "Phase 1", "Phase 2", "Phase 3", "Phase 4" 형식 사용
- ✅ **테마**: 보건소, 의원, 일반병원, 종합병원은 페이즈 테마로 활용
- ✅ **스테이지 번호 체계**: 페이즈별 독립 번호 (Phase 1 스테이지 1-5, Phase 2 스테이지 1-5)

### 8.3. 클리어된 스테이지 시각적 피드백 ✅

**결정 완료**:

- ✅ **클리어된 스테이지 표시**: 녹색 체크 표시
- ✅ **재도전 가능**: 클리어된 스테이지도 재도전 가능

### 8.4. 페이즈 전환 UI/UX ✅

**결정 완료**:

- ✅ **페이즈 간 이동**: 메인 페이지에서 페이즈 선택 → 스테이지 페이지로 이동
- ✅ **페이즈 잠금 해제 조건**: 이전 페이즈의 모든 스테이지 클리어
- ✅ **진행 순서**: Phase 1 → Phase 2 → Phase 3 → Phase 4

### 8.5. 잠금 상태 스테이지 인터랙션 ✅

**결정 완료**:

- ✅ **잠금 상태 스테이지 클릭 시**: 아무 반응 없음

### 8.6. 스테이지 진행 상황 표시 ✅

**결정 완료**:

- ✅ **스테이지 진행 상황 표시**: 퀴즈 풀이 화면에서 제공됨
  - 스테이지 정보: 페이즈와 스테이지 정보 (예: "Stage 2-3")
  - 진행률 프로그래스바: 5칸으로 나누어진 프로그래스바, 한 칸씩 채워나가는 방식
  - 현재 진행 중인 문제 번호 표시 (예: 5문제 중 2번째 문제 = 2칸 채워짐)

### 8.7. 추가 기능 ✅

**결정 완료**:

- ✅ **뒤로가기 버튼**: 좌측 상단에 추가 (메인 페이지로 복귀)
- ✅ **페이즈 정보 표시**: 불필요 (제거)
- ✅ **스테이지 미리보기**: 불필요 (제거)

### 8.8. 퀴즈 풀이 페이지 관련 결정 사항 ✅

(이전 Section 7.5.2에서 명확화됨)

### 8.9. 문제 결과 페이지 관련 결정 사항 ✅

#### 8.9.1. 다음 문제 전환 방식 ✅

**결정 완료**:

- ✅ **다음 문제 전환**: 2-3초 후 자동 전환 + 버튼 클릭으로 즉시 전환

#### 8.9.2. 마지막 문제 처리 ✅

**결정 완료**:

- ✅ **마지막 문제 버튼**: "다음 문제 >" → "결과 보기 >" 버튼으로 변경
- ✅ **스테이지 결과 UI**: 추후 제공 예정

#### 8.9.3. 애니메이션 지속 시간 ✅

**결정 완료**:

- ✅ **애니메이션 지속 시간**: 2초

#### 8.9.4. 하트 소모 시스템 ✅

**결정 완료**:

- ✅ **하트 소모 시점**:
  - 스테이지 시작 시: -1
  - 오답 선택 시: 추가 -1
- ✅ **하트 0 처리**:
  - 하트 부족 모달창 표시
  - 광고 시청 또는 포인트 소모로 하트 획득

#### 8.9.5. 점수 획득 시점 ✅

**결정 완료**:

- ✅ **점수 획득**: 스테이지 결과 페이지에서 제공

#### 8.9.6. 아이템 사용 시점 ✅

**결정 완료**:

- ✅ **아이템 사용**: 선택지 버튼 클릭 전에만 사용 가능

#### 8.9.7. 뒤로가기 버튼 ✅

**결정 완료**:

- ✅ **문제 풀이 시**: 뒤로가기 없음
- ✅ **스테이지 나가기**: 설정 버튼에서 "나가기" 옵션으로 가능

### 8.10. 하트 부족 모달창 관련 결정 사항 ✅

#### 8.10.1. 모달창 닫기 버튼 ✅

**결정 완료**:

- ✅ **닫기 버튼**: 없음 (두 버튼 중 하나를 선택해야 함)

#### 8.10.2. 하트 획득 후 동작 ✅

**결정 완료**:

- ✅ **하트 획득 후**: "하트를 획득했습니다!" 메시지 표시 후 자동으로 모달창 닫힘
- ✅ **페이지 복귀**: 퀴즈 풀이 페이지로 자동 복귀

#### 8.10.3. 광고 시청 실패 시 처리 ✅

**결정 완료**:

- ✅ **광고 시청 실패 시**: 모달창 유지 (다시 시도 가능)

#### 8.10.4. 포인트 부족 시 처리 ✅

**결정 완료**:

- ✅ **포인트 부족 시**: 포인트 표시 버튼이 "나가기" 버튼으로 변경
- ✅ **나가기 버튼**: 스테이지 선택 페이지로 이동

#### 8.10.5. 광고 시청 제한 ✅

**결정 완료**:

- ✅ **일일 제한**: 광고 시청 일일 5회 제한

#### 8.10.6. 모달창 표시 시점 ✅

**결정 완료**:

- ✅ **하트 0 시**: 문제 풀이 중 하트가 0이 되면 모달창 표시
- ✅ **스테이지 진입 시**: 스테이지 진입 시 하트가 부족하면 모달창 표시

### 8.11. 아이템 사용 모달창 관련 결정 사항 ✅

#### 8.11.1. 아이템 사용 후 동작 ✅

**결정 완료**:

- ✅ **아이템 사용 후**: 자동으로 모달창 닫힘

#### 8.11.2. 체크박스 기본 상태 ✅

**결정 완료**:

- ✅ **체크박스 기본 상태**: 체크 안 됨 (기본값)

#### 8.11.3. 체크박스 설정 저장 ✅

**결정 완료**:

- ✅ **체크박스 설정 저장**: Supabase에 저장 (계정별)

#### 8.11.4. 아이템 사용 후 효과 표시 ✅

**결정 완료**:

- ✅ **효과 즉시 적용**: 모달창 닫힌 후 효과 적용
- ✅ **아이템별 효과**:
  - **오답제거**: 정답을 제외한 나머지 3개의 선택지 중 하나를 랜덤하게 삭제
  - **힌트제공**: 힌트 모달창 표시
  - **점수2배**: 점수 2배 아이템 버튼에 활성화 표시(노란 테두리 등) 및 나머지 아이템은 회색으로 변경
  - **자동정답**: 문제 결과 페이지(정답)로 바로 이동

#### 8.11.5. 포인트 부족 시 처리 ✅

**결정 완료**:

- ✅ **포인트 부족 시**: 아이템 버튼 비활성화(회색)

#### 8.11.6. 아이템 중복 사용 ✅

**결정 완료**:

- ✅ **아이템 사용 제한**: 문제당 한 번만 하나만 사용 가능

---

## 9. 구현 우선순위 (스테이지 선택 페이지)

### Phase 1: 기본 UI 구조 (우선순위 높음)

- [ ] 페이즈별 배경 이미지 적용
- [ ] 테마 건물 표시
- [ ] 경로 및 스테이지 마커 배치
- [ ] 스테이지 상태별 시각적 표시 (잠금 해제/잠금)

### Phase 2: 인터랙션 (우선순위 중간)

- [ ] 잠금 해제된 스테이지 클릭 이벤트
- [ ] 스테이지 → 퀴즈 풀이 페이지 이동
- [ ] 잠금 상태 스테이지 클릭 시 반응
- [ ] 뒤로가기 버튼 (메인 페이지 복귀)

### Phase 3: 고급 기능 (우선순위 낮음)

- [ ] 클리어된 스테이지 시각적 피드백
- [ ] 페이즈 전환 UI/UX
- [ ] 스테이지 잠금 해제 애니메이션
- [ ] 스테이지 진행률 표시
- [ ] 스테이지 미리보기

---

## 10. 참고 자료

- [PROJECT.md](./PROJECT.md) - 게임 전체 구조 및 시스템
- [ARCHITECTURE.md](./ARCHITECTURE.md) - 기술 아키텍처
- [TOSS_LOGIN_SETUP.md](./TOSS_LOGIN_SETUP.md) - 토스 로그인 설정

---

**Last Updated**: 2025-01-27  
**Status**: 퀴즈 게임 메커니즘 구현 완료 ✅ (메인 페이지, 스테이지 페이지, 퀴즈 페이지, 결과 페이지 구현 완료)  
**Next Steps**:

1. 아이템 사용 로직 구현 (오답 삭제, 힌트, 점수 2배, 자동 정답)
2. 스테이지 완료 시스템 구현 (5문제 완료 시 결과 페이지)
3. 설정 메뉴 모달 구현
4. 하트 부족 모달 구현 (광고 시청 유도)
5. 폭죽 애니메이션 재구현 (CSS 또는 다른 방식)
6. 레벨업 시스템 구현
7. 업적 시스템 구현

---

## 8. 구현 완료된 기능 ✅

### 8.1. 메인 페이지 헤더 (2025-10-21 완료)

- **고정 헤더**: 상단에 고정된 헤더 영역
- **캐릭터 & 레벨**: 레벨별 동적 캐릭터 이미지 로딩
- **하트 시스템**: 실시간 하트 개수 및 충전 타이머 표시
- **점수 시스템**: 현재 보유 포인트 표시
- **설정 버튼**: 설정 메뉴 접근 버튼

### 8.2. 페이즈 맵 시스템 (2025-10-21 완료)

- **4개 페이즈 블록**: 블러 처리된 투명 카드 형태
- **상태별 이미지**: 활성화/잠금 상태에 따른 동적 이미지 표시
- **연결선**: 페이즈 간 연결을 나타내는 벡터 이미지
- **실제 데이터 연동**: `currentPhase` 필드 기반 상태 결정

### 8.3. 스크롤 및 네비게이션 (2025-10-21 완료)

- **스크롤 가능한 콘텐츠**: 메인 콘텐츠 영역 스크롤
- **고정 헤더**: 헤더는 고정, 콘텐츠만 스크롤
- **하단 고정**: 페이지 로드 시 페이즈 1 위치로 자동 스크롤
- **새로고침 대응**: 새로고침 시에도 올바른 위치 유지

### 8.4. 데이터 연동 및 최적화 (2025-10-21 완료)

- **실시간 데이터**: Supabase 연동으로 실시간 사용자 데이터 표시
- **성능 최적화**: `refill_heart` 불필요한 호출 97% 감소
- **하트 타이머**: 효율적인 타이머 로직 구현
- **이미지 최적화**: Next.js Image 컴포넌트 활용

### 8.5. 퀴즈 게임 페이지 시스템 (2025-01-27 완료)

#### 8.5.1. 퀴즈 페이지 기본 구조

- **동적 라우팅**: `/game/quiz?phase=1&stage=1` 형식
- **배경 시스템**: 정답/오답에 따른 동적 배경 변경
  - 퀴즈 중: `/images/backgrounds/background-quiz.png`
  - 정답: `/images/backgrounds/background-answer.png`
  - 오답: `/images/backgrounds/background-wrong.png`
- **고정 헤더**: 상단에 GameHeader 컴포넌트 고정

#### 8.5.2. 진행률 표시 시스템

- **위치**: 상단 고정 (`top-[84px]`)
- **구성 요소**:
  - 테두리: `/images/ui/progressbar01.png` (310x24px)
  - 내부: `/images/ui/progressbar02.png` (300x16px)
  - 진행률 바: 녹색 그라데이션 (`linear-gradient(to bottom, #9DF544, #63D42A)`)
- **텍스트**: "STAGE 1-1 (1/5)" 형식으로 현재 진행 상황 표시
- **진행률 계산**: `(currentQuestionIndex + 1) / stageQuestions.length * 300px`

#### 8.5.3. 퀴즈 문제 표시 시스템

- **칠판 UI**: 342x282px 칠판 이미지 (`/images/items/blackboard.png`)
- **동적 폰트**: 텍스트 길이에 따른 자동 폰트 크기 조정
  - 20자 이하: text-2xl (24px)
  - 30자 이하: text-xl (20px)
  - 40자 이하: text-lg (18px)
  - 50자 이하: text-base (16px)
  - 60자 이하: text-sm (14px)
  - 60자 초과: text-xs (12px)
- **문제 구성**: 토픽 + 문제 텍스트 조합
- **텍스트 스타일**: 흰색, 중앙 정렬, 적절한 줄 간격

#### 8.5.4. 선택지 버튼 시스템

- **버튼 사양**: 300x56px 파란색 그라데이션 버튼
- **스타일**:
  - 배경: `linear-gradient(180deg, #50B0FF 0%, #50B0FF 50%, #008DFF 50%, #008DFF 100%)`
  - 테두리: `2px solid #76C1FF`
  - 외곽선: `2px solid #000000`
  - 그림자: `0px 4px 4px 0px rgba(0, 0, 0, 0.25), inset 0px 3px 0px 0px rgba(0, 0, 0, 0.1)`
- **텍스트**: 흰색 16px, weight 400, 1px 검은색 스트로크
- **포인트 이미지**: `/images/items/button-point-blue.png` (8.47x6.3px)
- **배치**: 세로로 4개 선택지, 각각 16px 간격

#### 8.5.5. 결과 페이지 시스템

- **정답 페이지**:
  - 배경: `/images/backgrounds/background-answer.png`
  - 메시지: "정답입니다!"
  - 설명: 퀴즈 테이블의 explanation 필드 표시
- **오답 페이지**:
  - 배경: `/images/backgrounds/background-wrong.png`
  - 메시지: "아쉽네요! 정답은,"
  - 정답 표시: 정답 선택지 + 설명
- **다음 문제 버튼**: 160x56px, 선택지 버튼과 동일한 스타일
- **선택한 답안 표시**:
  - 정답: 녹색 그라데이션 (#00C951)
  - 오답: 빨간색 그라데이션 (#FF2F32)
- **캐릭터 이미지**: 390px 너비로 표시

#### 8.5.6. 아이템 바 시스템

- **위치**: 화면 하단 고정 (`fixed bottom-0`)
- **z-index**: 50 (선택지 버튼보다 위에 표시)
- **아이템 구성**: 4개 아이템 버튼 (60x60px, 20px 간격)
  - 오답 삭제: 50포인트 이상 필요 (`item-remove-wrong-able.png` / `item-remove-wrong-disable.png`)
  - 힌트: 80포인트 이상 필요 (`item-hint-able.png` / `item-hint-disable.png`)
  - 점수 2배: 100포인트 이상 필요 (`item-double-able.png` / `item-double-disable.png`)
  - 자동 정답: 200포인트 이상 필요 (`item-auto-answer-able.png` / `item-auto-answer-disable.png`)
- **상태 표시**: 포인트 부족 시 disable 이미지 표시
- **조건부 렌더링**: 결과 페이지에서는 아이템 바 숨김

#### 8.5.7. 하트 시스템 구현

- **스테이지 진입 시 하트 차감**: 진입 시 1개 하트 소모
- **오답 시 하트 차감**: 틀린 답 선택 시 1개 하트 소모
- **중복 차감 방지**: `useRef`를 사용한 중복 실행 방지 메커니즘
- **실시간 카운트다운**: 5분마다 하트 충전, 실시간 카운트다운 표시
- **하트 부족 처리**: 하트가 0일 때 스테이지 진입 불가

#### 8.5.8. 랜덤 퀴즈 시스템

- **난이도별 문제**: 스테이지별 난이도 매핑
  - 스테이지 1-2: 쉬움
  - 스테이지 3-4: 보통
  - 스테이지 5: 어려움
- **중복 방지**: 스테이지당 5개 문제를 중복 없이 랜덤 선택
- **클라이언트 사이드 셔플링**: Supabase 제한으로 인한 클라이언트 사이드 랜덤 처리

### 8.5. 스테이지 페이지 시스템 (2025-10-21 최신 완료)

- **4개 페이즈별 스테이지 페이지**: `/game/phase1`, `/game/phase2`, `/game/phase3`, `/game/phase4`
- **페이즈별 고유 배경**: 각 페이즈마다 다른 배경 이미지 적용
- **5개 스테이지 버튼**: 세로 배치된 파란색 그라데이션 버튼 (64x64px)
- **뒤로가기 버튼**: `icon-backspace.png` (24x24px) 사용
- **헤더 제거**: 스테이지 페이지에서는 상단 헤더 숨김

### 8.6. 스테이지 잠금 시스템 (2025-10-21 최신 완료)

- **실제 데이터 기반 잠금**: `currentStage` 필드로 잠금 상태 결정
- **잠금 아이콘 표시**: 잠금된 스테이지에 `icon-lock.png` 표시
- **클릭 방지**: 잠금된 스테이지는 클릭 불가
- **시각적 피드백**: 잠금 상태와 활성 상태 명확한 구분

### 8.7. 반응형 스크롤 시스템 (2025-10-21 최신 완료)

- **화면 크기 감지**: `window.innerHeight < 700px` 기준
- **조건부 스크롤**: 작은 화면에서만 스크롤 활성화
- **반응형 배치**: 화면 크기에 따른 스테이지 버튼 배치 조정
- **일관된 경험**: 메인 페이지와 모든 페이즈 페이지에 동일 적용

### 8.8. 로딩 화면 개선 (2025-10-21 최신 완료)

- **배경 이미지 사용**: 검정색 배경 대신 각 페이지의 실제 배경 사용
- **일관된 분위기**: 로딩 중에도 페이지 테마 유지
- **모든 페이지 적용**: 메인 페이지와 모든 페이즈 페이지에 동일 적용

---

## 9. 다음 단계 (Phase 4)

### 9.1. 퀴즈 게임 메커니즘 구현 예정

- [ ] 스테이지 클릭 시 퀴즈 화면으로 이동
- [ ] 퀴즈 문제 표시 및 선택지 UI
- [ ] 정답/오답 처리 로직
- [ ] 점수 및 경험치 계산
- [ ] 하트 소모 및 충전 로직

### 9.2. 추가 UI 개선 예정

- [ ] 설정 메뉴 모달 구현
- [ ] 하트 부족 모달 구현
- [ ] 아이템 사용 모달 구현
- [ ] 퀴즈 결과 화면 구현

---

## 10. 구현 완료 요약

**2025-01-27 (최신)**: 퀴즈 게임 메커니즘 및 스테이지 결과 시스템 구현 완료

- ✅ 점수/경험치 시스템 구현 (난이도별 계산, 보너스 시스템)
- ✅ 레벨업 시스템 구현 (XP 공식, 직급 시스템, 하트 회복 보상)
- ✅ 스테이지 결과 모달 시스템 (성공/실패 모달, 보상 표시)
- ✅ 데이터베이스 연동 시스템 (RPC 함수, 실시간 동기화)
- ✅ 페이즈별 라우팅 시스템 (스테이지 완료 후 해당 페이즈로 이동)
- ✅ 사용자 답안 추적 시스템 (정답 개수 실시간 계산)
- ✅ 스테이지 성공/실패 판정 (3문제 이상 정답 시 성공)

**2025-10-21 (최신)**: 스테이지 페이지 시스템 및 반응형 개선 완료

- ✅ 스테이지 페이지 구현 (Phase 1-4, 각 5개 스테이지)
- ✅ 스테이지 잠금 시스템 (실제 데이터 기반)
- ✅ 반응형 스크롤 시스템 (화면 크기별 최적화)
- ✅ 로딩 화면 개선 (배경 이미지 사용)
- ✅ UI/UX 최적화 (투명 처리 제거, 명확한 구분)

**2025-10-21 (이전)**: 메인 게임 페이지 UI 구현 완료

- ✅ 고정 헤더 (캐릭터, 레벨, 하트, 점수, 설정)
- ✅ 페이즈 맵 시스템 (4개 페이즈 블록, 연결선)
- ✅ 실제 데이터 연동 (`currentPhase` 기반)
- ✅ 스크롤 기능 및 새로고침 대응
- ✅ 성능 최적화 (`refill_heart` 97% 감소)

**다음 단계**: Phase 5 - 아이템 시스템 및 하트 부족 모달 구현 🚀
