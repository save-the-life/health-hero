# π—οΈ ν—¬μ¤ νμ–΄λ΅ μ•„ν‚¤ν…μ²

## π“‹ λ©μ°¨

1. [μ „μ²΄ μ•„ν‚¤ν…μ²](#μ „μ²΄-μ•„ν‚¤ν…μ²)
2. [μ„λ²„λ¦¬μ¤ μ„¤κ³„](#μ„λ²„λ¦¬μ¤-μ„¤κ³„)
3. [λ°μ΄ν„° νλ¦„](#λ°μ΄ν„°-νλ¦„)
4. [λ³΄μ• λ©”μ»¤λ‹μ¦](#λ³΄μ•-λ©”μ»¤λ‹μ¦)
5. [ν™•μ¥ κ°€λ¥μ„±](#ν™•μ¥-κ°€λ¥μ„±)

---

## π― μ „μ²΄ μ•„ν‚¤ν…μ²

### μ„λ²„λ¦¬μ¤ (Serverless) κµ¬μ΅°

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                  μ‚¬μ©μ (λΈλΌμ°μ €)                    β”‚
β”‚                                                       β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β”‚  β”‚         Next.js 15 (Static Export)          β”‚   β”‚
β”‚  β”‚  β€Ά App Router                               β”‚   β”‚
β”‚  β”‚  β€Ά React 19                                 β”‚   β”‚
β”‚  β”‚  β€Ά Zustand (μƒνƒ κ΄€λ¦¬)                       β”‚   β”‚
β”‚  β”‚  β€Ά Phaser 3 (κ²μ„ μ—”μ§„)                     β”‚   β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
            β”‚                         β”‚
            β”‚ HTTPS                   β”‚ HTTPS
            β”‚                         β”‚
    β”β”€β”€β”€β”€β”€β”€β”€β–Όβ”€β”€β”€β”€β”€β”€β”€β”€β”        β”β”€β”€β”€β”€β”€β”€β–Όβ”€β”€β”€β”€β”€β”€β”
    β”‚   ν† μ¤ API     β”‚        β”‚  Supabase   β”‚
    β”‚  (μ•±μΈν† μ¤)     β”‚        β”‚             β”‚
    β”‚                β”‚        β”‚ PostgreSQL  β”‚
    β”‚ β€Ά ν† μ¤ λ΅κ·ΈμΈ   β”‚        β”‚ + Auth      β”‚
    β”‚ β€Ά ν† ν° λ°κΈ‰    β”‚        β”‚ + RLS       β”‚
    β”‚ β€Ά μ‚¬μ©μ μ •λ³΄   β”‚        β”‚             β”‚
    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”        β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

**νΉμ§•:**

- β… **λ°±μ—”λ“ μ„λ²„ μ—†μ**
- β… ν΄λΌμ΄μ–ΈνΈκ°€ μ§μ ‘ μ™Έλ¶€ API νΈμ¶
- β… Supabaseκ°€ λ°μ΄ν„°λ² μ΄μ¤ + μΈμ¦ + API μ κ³µ
- β… μ™„μ „ν• μ •μ  μ‚¬μ΄νΈ (Static Export)

---

## π¨ μ„λ²„λ¦¬μ¤ μ„¤κ³„

### 1. μΈμ¦ (Authentication)

```
μ‚¬μ©μ
  β”‚
  β”‚ 1. λ΅κ·ΈμΈ λ²„νΌ ν΄λ¦­
  β–Ό
appLogin() (μ•±μΈν† μ¤ SDK)
  β”‚
  β”‚ 2. authorizationCode λ°ν™
  β–Ό
fetch('ν† μ¤ API') β† ν΄λΌμ΄μ–ΈνΈμ—μ„ μ§μ ‘ νΈμ¶!
  β”‚
  β”‚ 3. accessToken λ°ν™
  β–Ό
supabase.auth.signUp() β† ν΄λΌμ΄μ–ΈνΈμ—μ„ μ§μ ‘ νΈμ¶!
  β”‚
  β”‚ 4. Supabase μ„Έμ… μƒμ„±
  β–Ό
user_profiles ν…μ΄λΈ”μ— μ €μ¥ (RLSλ΅ λ³΄νΈ)
```

**ν¬μΈνΈ:**

- λ¨λ“  λ‹¨κ³„κ°€ ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‹¤ν–‰
- μ„λ²„ λ¶ν•„μ”
- Client Secret λ¶ν•„μ”

### 2. λ°μ΄ν„° μ €μ¥ (Database)

```
μ‚¬μ©μ μ•΅μ… (μ μ νλ“, λ λ²¨μ—… λ“±)
  β”‚
  β”‚ ν΄λΌμ΄μ–ΈνΈμ—μ„ κ³„μ‚°
  β–Ό
supabase.from('user_profiles').update(...)
  β”‚
  β”‚ RLS μ •μ±… μλ™ μ μ©
  β–Ό
PostgreSQL (Supabase)
```

**λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§ (μ™„λ£ β…):**

```sql
-- ν•µμ‹¬ ν…μ΄λΈ”λ“¤
user_profiles (μ‚¬μ©μ ν”„λ΅ν•„)
β”β”€β”€ level, current_exp, total_score
β”β”€β”€ current_streak, current_stage, current_phase
β””β”€β”€ toss_user_key, toss_access_token

quizzes (ν€΄μ¦ λ°μ΄ν„°) β…
β”β”€β”€ qnum, topic, prompt
β”β”€β”€ choices (JSONB λ°°μ—΄)
β”β”€β”€ answer_index, hint, explanation
β””β”€β”€ difficulty_label, difficulty_level

user_progress (μ§„ν–‰ μƒν™©) β…
β”β”€β”€ phase, stage, completed
β”β”€β”€ score, attempts, correct_count
β””β”€β”€ total_questions

user_quiz_records (ν€΄μ¦ κΈ°λ΅) β…
β”β”€β”€ quiz_id, phase, stage
β”β”€β”€ is_correct, score_earned
β””β”€β”€ items_used (JSONB λ°°μ—΄)

user_item_settings (μ•„μ΄ν… μ„¤μ •) β…
β”β”€β”€ item_type, show_popup
β””β”€β”€ νμ—… ν‘μ‹ μ—¬λ¶€ κ΄€λ¦¬

user_hearts (ν•νΈ μ‹μ¤ν…) β…
β”β”€β”€ current_hearts, last_refill_at
β””β”€β”€ ad_views_today, ad_reset_at
```

**λ³΄μ•:**

```sql
-- μ‚¬μ©μλ” μμ‹ μ λ°μ΄ν„°λ§ μμ • κ°€λ¥
CREATE POLICY "Users can update own profile"
  ON user_profiles
  FOR UPDATE
  USING (auth.uid() = id);

-- ν€΄μ¦λ” λ¨λ“  μΈμ¦λ μ‚¬μ©μκ°€ μ½κΈ° κ°€λ¥
CREATE POLICY "Authenticated users can read quizzes"
  ON quizzes
  FOR SELECT
  USING (auth.role() = 'authenticated');
```

### 3. κ΄‘κ³  (Advertising)

```
ν•νΈ 0 β†’ μ»¨ν‹°λ‰΄ λ¨λ‹¬
  β”‚
  β”‚ "κ΄‘κ³  λ³΄κ³  κ³„μ†ν•κΈ°" ν΄λ¦­
  β–Ό
μ•±μΈν† μ¤ κ΄‘κ³  SDK / AdMob SDK
  β”‚
  β”‚ κ΄‘κ³  μ‹μ²­ μ™„λ£
  β–Ό
ν΄λΌμ΄μ–ΈνΈμ—μ„ λ³΄μƒ μ²λ¦¬
  β”‚
  β”‚ hearts++
  β–Ό
supabase.from('ad_rewards').insert(...)
  β”‚
  β”‚ RLSλ΅ μ΅°μ‘ λ°©μ§€
  β–Ό
κ²μ„ μ¬κ°
```

**νΉμ§•:**

- SDKλ§μΌλ΅ κ΄‘κ³  ν‘μ‹
- μ„λ²„ κ²€μ¦ λ¶ν•„μ” (RLSλ΅ λ€μ²΄)
- ν΄λΌμ΄μ–ΈνΈμ—μ„ μ™„κ²°

---

## π”„ λ°μ΄ν„° νλ¦„

### λ΅κ·ΈμΈ ν”λ΅μ°

```mermaid
sequenceDiagram
    participant U as μ‚¬μ©μ
    participant C as ν΄λΌμ΄μ–ΈνΈ
    participant T as ν† μ¤ API
    participant S as Supabase

    U->>C: λ΅κ·ΈμΈ λ²„νΌ ν΄λ¦­
    C->>T: appLogin() β†’ authorizationCode
    C->>T: generate-token β†’ accessToken
    C->>T: user μ •λ³΄ μ΅°ν β†’ name
    C->>S: signUp/signIn
    C->>S: user_profiles upsert
    S->>C: μ„Έμ… λ°ν™
    C->>U: /game νμ΄μ§€λ΅ μ΄λ™
```

### κ²μ„ ν”λ μ΄ ν”λ΅μ°

```mermaid
sequenceDiagram
    participant U as μ‚¬μ©μ
    participant C as ν΄λΌμ΄μ–ΈνΈ
    participant S as Supabase

    U->>C: ν€΄μ¦ μ •λ‹µ μ μ¶
    C->>C: μ •λ‹µ ν™•μΈ (ν΄λΌμ΄μ–ΈνΈ)
    C->>C: μ μ κ³„μ‚°
    C->>S: user_profiles.update(score)
    C->>S: user_quiz_records.insert(κ²°κ³Ό)
    C->>S: user_progress.update(μ§„ν–‰μƒν™©)
    S->>S: RLS μ •μ±… ν™•μΈ
    S->>C: μ—…λ°μ΄νΈ μ„±κ³µ
    C->>U: κ²°κ³Ό ν‘μ‹
```

### ν€΄μ¦ λ°μ΄ν„° λ΅λ”© ν”λ΅μ°

```mermaid
sequenceDiagram
    participant U as μ‚¬μ©μ
    participant C as ν΄λΌμ΄μ–ΈνΈ
    participant S as Supabase

    U->>C: μ¤ν…μ΄μ§€ μ„ νƒ
    C->>S: quizzes.select(λ‚μ΄λ„λ³„)
    S->>C: ν€΄μ¦ λ°μ΄ν„° λ°ν™
    C->>C: λλ¤ μ„ νƒ (5λ¬Έμ )
    C->>U: ν€΄μ¦ μ‹μ‘
```

### κ΄‘κ³  λ³΄μƒ ν”λ΅μ°

```mermaid
sequenceDiagram
    participant U as μ‚¬μ©μ
    participant C as ν΄λΌμ΄μ–ΈνΈ
    participant A as κ΄‘κ³  SDK
    participant S as Supabase

    U->>C: κ΄‘κ³  λ³΄κ³  κ³„μ†ν•κΈ°
    C->>A: showRewardedAd()
    A->>U: κ΄‘κ³  ν‘μ‹
    U->>A: κ΄‘κ³  μ‹μ²­ μ™„λ£
    A->>C: rewarded = true
    C->>C: hearts++
    C->>S: ad_rewards.insert()
    S->>S: RLS: μ‚½μ…λ§ κ°€λ¥
    C->>U: κ²μ„ μ¬κ°
```

---

## π›΅οΈ λ³΄μ• λ©”μ»¤λ‹μ¦

### 1. ν† μ¤ λ΅κ·ΈμΈ λ³΄μ•

**κ³„μΈµμ  λ³΄μ•:**

1. **μ•±μΈν† μ¤ μ½μ†” λ“±λ΅** - λ“±λ΅λ μ•±λ§ SDK μ‚¬μ©
2. **ν† μ¤μ•± λ‚΄λ¶€ μ‹¤ν–‰** - μΌλ° λΈλΌμ°μ €μ—μ„ νΈμ¶ λ¶κ°€
3. **μΈκ°€ μ½”λ“ μ ν•** - 10λ¶„ μ ν¨, 1νμ©
4. **ν† ν° λ§λ£** - AccessToken 1μ‹κ°„ ν›„ λ§λ£

**κ²°κ³Ό:**

- Client Secret λ¶ν•„μ”
- mTLS λ¶ν•„μ” (κΈ°λ³Έ κΈ°λ¥)
- μ¶©λ¶„ν μ•μ „

### 2. Supabase Row Level Security (RLS)

```sql
-- μμ‹ 1: μ½κΈ° μ ν•
CREATE POLICY "Users can view own profile"
  ON user_profiles
  FOR SELECT
  USING (auth.uid() = id);

-- μμ‹ 2: μ“°κΈ° μ ν•
CREATE POLICY "Users can update own profile"
  ON user_profiles
  FOR UPDATE
  USING (auth.uid() = id);

-- μμ‹ 3: κ΄‘κ³  μ΅°μ‘ λ°©μ§€
CREATE POLICY "Users can insert own ad rewards"
  ON ad_rewards
  FOR INSERT
  WITH CHECK (auth.uid() = user_id);

-- μμ •/μ‚­μ  λ¶κ°€
CREATE POLICY "No updates allowed"
  ON ad_rewards
  FOR UPDATE
  USING (false);
```

**ν¨κ³Ό:**

- β… μ‚¬μ©μ Aλ” μ‚¬μ©μ B λ°μ΄ν„° μ ‘κ·Ό λ¶κ°€
- β… μ μ μ΅°μ‘ λ¶κ°€
- β… κ΄‘κ³  λ³΄μƒ μ¤‘λ³µ λ¶κ°€
- β… anon key λ…Έμ¶λμ–΄λ„ μ•μ „

### 3. ν΄λΌμ΄μ–ΈνΈ κ²€μ¦

```typescript
// ν΄λΌμ΄μ–ΈνΈμ—μ„ κΈ°λ³Έ κ²€μ¦
const validateAnswer = (answer: string, correct: string) => {
  return answer === correct;
};

// Supabaseμ— μ €μ¥ (RLSκ°€ μ¶”κ°€ λ³΄μ•)
await supabase
  .from("user_profiles")
  .update({ score: score + 10 })
  .eq("id", user.id);
```

**ν•κ³„:**

- β οΈ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ” μ΅°μ‘ κ°€λ¥
- β οΈ μ¤‘μ”ν• κ²€μ¦μ€ λ―Έλμ— μ„λ²„ ν•„μ”

**ν„μ¬ λ€μ‘:**

- RLSλ΅ μµμ† λ³΄μ• μ μ§€
- κ²μ„μ€ κ²½μλ³΄λ‹¤ ν•™μµ μ¤‘μ‹¬
- λ¦¬λ”λ³΄λ“λ” μ°Έκ³ μ©

---

## π€ ν™•μ¥ κ°€λ¥μ„±

### Phase 1: ν„μ¬ (μ„λ²„λ¦¬μ¤) β…

```
κµ¬μ΅°: ν΄λΌμ΄μ–ΈνΈ β†’ μ™Έλ¶€ API

κ°€λ¥:
β… ν† μ¤ λ΅κ·ΈμΈ
β… κ²μ¤νΈ λ΅κ·ΈμΈ (Anonymous Auth)
β… ν€΄μ¦ λ°μ΄ν„° κ΄€λ¦¬ (200λ¬Έν•­)
β… κ²μ„ ν”λ μ΄
β… λ°μ΄ν„° μ €μ¥ (6κ° ν…μ΄λΈ”)
β… ν•νΈ μ‹μ¤ν… (μλ™ μ¶©μ „)
β… κ΄‘κ³  (ν•νΈ μ¶©μ „)
β… RLS λ³΄μ• μ •μ±…

λΉ„μ©: $0/μ›”
```

### Phase 2: λ―Έλ (ν•μ΄λΈλ¦¬λ“)

```
κµ¬μ΅°: ν΄λΌμ΄μ–ΈνΈ β†’ Next.js API Routes β†’ μ™Έλ¶€ API

μ¶”κ°€:
β… ν† μ¤ νμ΄ κ²°μ 
β… μΈμ•± κ²°μ 
β… ν‘Έμ‹ μ•λ¦Ό
β… μ •κµν• λ¶€μ • λ°©μ§€

ν•„μ”:
β οΈ mTLS μΈμ¦μ„
β οΈ API Routes κµ¬ν„
β οΈ μ„λ²„ λ°°ν¬

λΉ„μ©: $20/μ›” (Vercel Pro)
```

### Phase 3: μ™„μ „ μ„λ²„ (μ„ νƒ)

```
κµ¬μ΅°: ν΄λΌμ΄μ–ΈνΈ β†’ μ „μ© λ°±μ—”λ“ β†’ μ™Έλ¶€ API

μ¶”κ°€:
β… μ‹¤μ‹κ°„ λ©€ν‹°ν”λ μ΄
β… κ΄€λ¦¬μ λ€μ‹λ³΄λ“
β… κ³ κΈ‰ λ¶„μ„
β… μ™„λ²½ν• λ³΄μ•

ν•„μ”:
β οΈ Node.js μ„λ²„
β οΈ λ°μ΄ν„°λ² μ΄μ¤ λ§μ΄κ·Έλ μ΄μ…
β οΈ μΈν”„λΌ κ΄€λ¦¬

λΉ„μ©: $50+/μ›”
```

---

## π“ κΈ°μ  μ¤νƒ

### Frontend

```
- Framework: Next.js 15.5.5
- Runtime: React 19
- Language: TypeScript
- State: Zustand 5.0.8
- Styling: Tailwind CSS 4
- Game: Phaser 3.90.0
- Animation: Framer Motion
```

### Backend (μ„λ²„λ¦¬μ¤)

```
- Database: Supabase PostgreSQL
- Auth: Supabase Auth
- API: Supabase REST API
- Storage: Supabase Storage (λ―Έλ)
```

### External APIs

```
- Login: μ•±μΈν† μ¤ (ν† μ¤)
- Ads: μ•±μΈν† μ¤/AdMob
```

### Deployment

```
- Frontend: Vercel (Static)
- Backend: Supabase
- CDN: Vercel Edge Network
```

---

## π― μ„¤κ³„ μ›μΉ™

### 1. μ„λ²„λ¦¬μ¤ μ°μ„ 

- κ°€λ¥ν• ν• μ„λ²„ μ—†μ΄ κµ¬ν„
- λΉ„μ© μµμ†ν™”
- κ΄€λ¦¬ λ¶€λ‹΄ μµμ†ν™”

### 2. μ μ§„μ  ν™•μ¥

- ν•„μ”ν•  λ• μ„λ²„ μ¶”κ°€
- κΈ°μ΅΄ μ½”λ“ μ μ§€
- λ‹¨κ³„μ  λ§μ΄κ·Έλ μ΄μ…

### 3. λ³΄μ• μ°μ„ 

- RLSλ΅ λ°μ΄ν„° λ³΄νΈ
- ν΄λΌμ΄μ–ΈνΈ κ²€μ¦ + μ„λ²„ κ²€μ¦
- λ―Όκ°ν• λ°μ΄ν„°λ” μ„λ²„ μ²λ¦¬

### 4. μ‚¬μ©μ κ²½ν—

- λΉ λ¥Έ λ΅λ”©
- μ¤ν”„λΌμΈ μ§€μ› (PWA)
- λ°μ‘ν• λ””μμΈ

### 5. μ„±λ¥ μµμ ν™”

- λ°μ΄ν„° μΊμ‹± μ‹μ¤ν… (5λ¶„ μΊμ‹)
- μ¤‘λ³µ νΈμ¶ λ°©μ§€
- κ³µν†µ λ΅μ§ μ¶”μ¶
- λΉ λ¥Έ λ„¤λΉ„κ²μ΄μ… (router.push)

---

## π€ μ„±λ¥ μµμ ν™” μ•„ν‚¤ν…μ² (2025-01-27 μ¶”κ°€)

### 1. λ°μ΄ν„° λ΅λ”© μµμ ν™”

#### 1.1. μΊμ‹± μ‹μ¤ν…
```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚   Page Load     β”‚β”€β”€β”€β–¶β”‚  Cache Check    β”‚β”€β”€β”€β–¶β”‚  Server Call    β”‚
β”‚                 β”‚    β”‚  (5min cache)   β”‚    β”‚  (if needed)    β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
         β”‚                       β”‚                       β”‚
         β–Ό                       β–Ό                       β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  Instant Load   β”‚    β”‚  Cached Data    β”‚    β”‚  Fresh Data     β”‚
β”‚  (70% faster)   β”‚    β”‚  (localStorage) β”‚    β”‚  (DB + cache)   β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

#### 1.2. μ¤‘λ³µ νΈμ¶ λ°©μ§€
```typescript
// κ²μ„ μ¤ν† μ–΄μ—μ„ λ΅λ”© μƒνƒ κ΄€λ¦¬
if (state.isLoading) {
  console.log('μ΄λ―Έ λ΅λ”© μ¤‘μ…λ‹λ‹¤. μ¤‘λ³µ νΈμ¶ λ°©μ§€')
  return
}
```

### 2. μ»΄ν¬λ„νΈ μ•„ν‚¤ν…μ² κ°μ„ 

#### 2.1. κ³µν†µ λ΅μ§ μ¶”μ¶
```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                    useGamePage Hook                          β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚  β€Ά μΈμ¦ μƒνƒ μ΄κΈ°ν™”                                          β”‚
β”‚  β€Ά μ‚¬μ©μ λ°μ΄ν„° λ΅λ“ (μΊμ‹± μ μ©)                            β”‚
β”‚  β€Ά ν•νΈ νƒ€μ΄λ¨Έ μ—…λ°μ΄νΈ                                      β”‚
β”‚  β€Ά ν™”λ©΄ ν¬κΈ° κ°μ§€                                           β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                              β”‚
                              β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚   Game Page     β”‚  β”‚   Phase1 Page    β”‚  β”‚   Phase2 Page    β”‚
β”‚                 β”‚  β”‚                 β”‚  β”‚                 β”‚
β”‚  useGamePage()  β”‚  β”‚  useGamePage()  β”‚  β”‚  useGamePage()  β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

#### 2.2. λ¨λ‹¬ μƒνƒ κ΄€λ¦¬ κ°μ„ 
```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                    GameHeader                                β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚  β€Ά showExitModal μƒνƒ κ΄€λ¦¬                                   β”‚
β”‚  β€Ά showItemInfoModal μƒνƒ κ΄€λ¦¬                               β”‚
β”‚  β€Ά λ‚κ°€κΈ° λ¨λ‹¬ λ λ”λ§                                        β”‚
β”‚  β€Ά μ•„μ΄ν… μ„¤λ… λ¨λ‹¬ λ λ”λ§                                   β”‚
β”‚  β€Ά λ„¤λΉ„κ²μ΄μ… μ²λ¦¬ (router.push)                            β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                              β”‚
                              β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                SettingsDropdown                             β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚  β€Ά onShowExitModal μ½λ°± νΈμ¶                                β”‚
β”‚  β€Ά onShowItemInfoModal μ½λ°± νΈμ¶                            β”‚
β”‚  β€Ά μ„¤μ • λ©”λ‰΄ λ‹«κΈ° μ• λ‹λ©”μ΄μ…                                 β”‚
β”‚  β€Ά μμ°¨μ  λ¨λ‹¬ ν‘μ‹ μ²λ¦¬                                     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

#### 2.3. μ•„μ΄ν… μ„¤λ… λ¨λ‹¬ μ•„ν‚¤ν…μ²
```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                ItemInfoModal                                β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚  β€Ά 4κ° μ•„μ΄ν… λ°μ΄ν„° κ΄€λ¦¬ (μ¤λ‹µ μ‚­μ , ννΈ, μ μ 2λ°°, μλ™ μ •λ‹µ) β”‚
β”‚  β€Ά μΆμ° μ¬λΌμ΄λ“ λ„¤λΉ„κ²μ΄μ… (μν™ μ¬λΌμ΄λ“)                  β”‚
β”‚  β€Ά ν„μ¬ μ•„μ΄ν… μΈλ±μ¤ μƒνƒ κ΄€λ¦¬                             β”‚
β”‚  β€Ά μ•„μ΄ν…λ³„ μ„¤λ…, λΉ„μ©, μ•„μ΄μ½ ν‘μ‹                         β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                              β”‚
                              β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                    UI μ»΄ν¬λ„νΈ                              β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚  β€Ά popup-success.png λ°°κ²½ μ΄λ―Έμ§€                             β”‚
β”‚  β€Ά μ•„μ΄ν… λ°•μ¤ (80x80px, κ²½ν—μΉλ°•μ¤ μ¤νƒ€μΌ)                  β”‚
β”‚  β€Ά λ„¤λΉ„κ²μ΄μ… λ²„νΌ (block02.png + ν™”μ‚΄ν‘ μ•„μ΄μ½)             β”‚
β”‚  β€Ά λΉ„μ© ν‘μ‹ λ²„νΌ (λ‚κ°€κΈ° λ²„νΌκ³Ό λ™μΌν• μ¤νƒ€μΌ)              β”‚
β”‚  β€Ά λ‹«κΈ° λ²„νΌ (μ°μΈ΅ μƒλ‹¨ X)                                  β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### 3. λ„¤λΉ„κ²μ΄μ… μµμ ν™”

#### 3.1. λΌμ°ν… κ°μ„ 
```typescript
// Before: νμ΄μ§€ μƒλ΅κ³ μΉ¨
window.location.href = `/game/phase${currentPhase}`;

// After: ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“ λΌμ°ν…
router.push(`/game/phase${currentPhase}`);
```

#### 3.2. μƒνƒ μ μ§€
```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚   Quiz Page     β”‚β”€β”€β”€β–¶β”‚   Phase Page    β”‚β”€β”€β”€β–¶β”‚   Game Page     β”‚
β”‚                 β”‚    β”‚                 β”‚    β”‚                 β”‚
β”‚  Zustand State  β”‚    β”‚  Zustand State β”‚    β”‚  Zustand State β”‚
β”‚  (μ μ§€λ¨)       β”‚    β”‚  (μ μ§€λ¨)       β”‚    β”‚  (μ μ§€λ¨)       β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### 4. μ„±λ¥ μ§€ν‘

#### 4.1. λ΅λ”© μ‹κ°„ κ°μ„ 
```
Before: νμ΄μ§€ μ΄λ™ β†’ λ°μ΄ν„° λ΅λ”© (500ms) β†’ λ λ”λ§ (200ms) = 700ms
After:  νμ΄μ§€ μ΄λ™ β†’ μΊμ‹ ν™•μΈ (10ms) β†’ λ λ”λ§ (200ms) = 210ms
```

#### 4.2. λ„¤νΈμ›ν¬ μ”μ²­ κ°μ†
```
Before: λ§¤ νμ΄μ§€λ§λ‹¤ DB νΈμ¶ (100% μ”μ²­)
After:  μΊμ‹ μ‚¬μ© μ‹ DB νΈμ¶ μ¤ν‚µ (20% μ”μ²­)
```

#### 4.3. μ‚¬μ©μ κ²½ν— ν–¥μƒ
```
β€Ά μ¬λ°©λ¬Έ μ‹ 70% λΉ¨λΌμ§
β€Ά λ°μ΄ν„°λ² μ΄μ¤ νΈμ¶ 80% κ°μ†
β€Ά νμ΄μ§€ κ°„ μ¦‰μ‹ μ „ν™
β€Ά μƒνƒ μ μ§€λ΅ λκΉ€ μ—†λ” κ²½ν—
β€Ά μΆμ° μ¬λΌμ΄λ“ κ°€λ¥ν• μ•„μ΄ν… μ„¤λ… λ¨λ‹¬
β€Ά μΌκ΄€λ λ¨λ‹¬ λ””μμΈκ³Ό μ• λ‹λ©”μ΄μ…
```

---

## π“ μ°Έκ³  λ¬Έμ„

- [README_TOSS_LOGIN.md](../README_TOSS_LOGIN.md) - ν† μ¤ λ΅κ·ΈμΈ κ°μ”
- [TOSS_LOGIN_SETUP.md](./TOSS_LOGIN_SETUP.md) - μ„¤μ • κ°€μ΄λ“
- [SECURITY_FAQ.md](./SECURITY_FAQ.md) - λ³΄μ• FAQ
- [MTLS_GUIDE.md](./MTLS_GUIDE.md) - λ―Έλ ν™•μ¥ κ°€μ΄λ“
- [PROJECT.md](./PROJECT.md) - ν”„λ΅μ νΈ μ „μ²΄ κµ¬μ΅°
- [TROUBLESHOOTING.md](./TROUBLESHOOTING.md) - μ„±λ¥ μµμ ν™” λ¬Έμ  ν•΄κ²°

---

**Last Updated**: 2025-01-27  
**Architecture**: Serverless (Supabase + ν΄λΌμ΄μ–ΈνΈ)  
**Status**: Phase 4 μ™„λ£ β… (λ‚κ°€κΈ° λ¨λ‹¬ + μ„±λ¥ μµμ ν™” + μ•„μ΄ν… μ„¤λ… λ¨λ‹¬)  
**Next**: Phase 5 (μ•„μ΄ν… μ‹μ¤ν…)
