{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/WORK%20SPACE/health-hero/src/utils/tokenManager.ts"],"sourcesContent":["import { TossTokenResponse } from '@/types/toss'\r\n\r\nexport class TokenManager {\r\n  private static readonly ACCESS_TOKEN_KEY = 'toss_access_token'\r\n  private static readonly REFRESH_TOKEN_KEY = 'toss_refresh_token'\r\n  private static readonly EXPIRES_AT_KEY = 'toss_expires_at'\r\n  private static readonly USER_KEY = 'toss_user_key'\r\n\r\n  // 토큰 저장\r\n  static saveTokens(accessToken: string, refreshToken: string, expiresIn: number, userKey?: number) {\r\n    if (typeof window === 'undefined') return\r\n    \r\n    const expiresAt = Date.now() + (expiresIn * 1000)\r\n    \r\n    localStorage.setItem(this.ACCESS_TOKEN_KEY, accessToken)\r\n    localStorage.setItem(this.REFRESH_TOKEN_KEY, refreshToken)\r\n    localStorage.setItem(this.EXPIRES_AT_KEY, expiresAt.toString())\r\n    if (userKey) {\r\n      localStorage.setItem(this.USER_KEY, userKey.toString())\r\n    }\r\n  }\r\n\r\n  // 토큰 조회\r\n  static getAccessToken(): string | null {\r\n    if (typeof window === 'undefined') return null\r\n    return localStorage.getItem(this.ACCESS_TOKEN_KEY)\r\n  }\r\n\r\n  static getRefreshToken(): string | null {\r\n    if (typeof window === 'undefined') return null\r\n    return localStorage.getItem(this.REFRESH_TOKEN_KEY)\r\n  }\r\n\r\n  static getUserKey(): number | null {\r\n    if (typeof window === 'undefined') return null\r\n    const userKey = localStorage.getItem(this.USER_KEY)\r\n    return userKey ? parseInt(userKey) : null\r\n  }\r\n\r\n  // 토큰 만료 확인\r\n  static isTokenExpired(): boolean {\r\n    if (typeof window === 'undefined') return true\r\n    \r\n    const expiresAt = localStorage.getItem(this.EXPIRES_AT_KEY)\r\n    if (!expiresAt) return true\r\n    \r\n    // 5분 버퍼를 두고 만료 체크 (300,000ms)\r\n    return Date.now() >= parseInt(expiresAt) - 300000\r\n  }\r\n\r\n  // 토큰 갱신\r\n  static async refreshAccessToken(): Promise<string> {\r\n    const refreshToken = this.getRefreshToken()\r\n    if (!refreshToken) {\r\n      throw new Error('리프레시 토큰이 없습니다.')\r\n    }\r\n\r\n    try {\r\n      const response = await fetch('https://apps-in-toss-api.toss.im/api-partner/v1/apps-in-toss/user/oauth2/refresh-token', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          refreshToken\r\n        })\r\n      })\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`토큰 갱신 요청 실패: ${response.status}`)\r\n      }\r\n\r\n      const data: TossTokenResponse = await response.json()\r\n      \r\n      if (data.resultType === 'FAILURE') {\r\n        throw new Error(data.failure?.errorMessage || '토큰 갱신 실패')\r\n      }\r\n\r\n      if (data.success) {\r\n        // 새 토큰 저장\r\n        this.saveTokens(\r\n          data.success.accessToken,\r\n          data.success.refreshToken,\r\n          data.success.expiresIn\r\n        )\r\n        return data.success.accessToken\r\n      }\r\n\r\n      throw new Error('토큰 갱신 응답이 올바르지 않습니다.')\r\n    } catch (error) {\r\n      console.error('토큰 갱신 실패:', error)\r\n      // 토큰 갱신 실패 시 로그아웃 처리\r\n      this.clearTokens()\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // 토큰 삭제\r\n  static clearTokens() {\r\n    if (typeof window === 'undefined') return\r\n    \r\n    localStorage.removeItem(this.ACCESS_TOKEN_KEY)\r\n    localStorage.removeItem(this.REFRESH_TOKEN_KEY)\r\n    localStorage.removeItem(this.EXPIRES_AT_KEY)\r\n    localStorage.removeItem(this.USER_KEY)\r\n  }\r\n\r\n  // 유효한 액세스 토큰 가져오기 (필요시 자동 갱신)\r\n  static async getValidAccessToken(): Promise<string | null> {\r\n    const accessToken = this.getAccessToken()\r\n    \r\n    if (!accessToken) {\r\n      return null\r\n    }\r\n\r\n    // 토큰이 만료되었으면 갱신\r\n    if (this.isTokenExpired()) {\r\n      try {\r\n        return await this.refreshAccessToken()\r\n      } catch (error) {\r\n        console.error('토큰 자동 갱신 실패:', error)\r\n        return null\r\n      }\r\n    }\r\n\r\n    return accessToken\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/WORK%20SPACE/health-hero/src/types/toss.ts"],"sourcesContent":["// 토스 인증 응답 (appLogin 결과)\r\nexport interface TossAuthResponse {\r\n  authorizationCode: string\r\n  referrer: 'DEFAULT' | 'SANDBOX'\r\n}\r\n\r\n// 토스 토큰 응답\r\nexport interface TossTokenResponse {\r\n  resultType: 'SUCCESS' | 'FAILURE' | 'FAIL'\r\n  success?: {\r\n    tokenType: 'Bearer'\r\n    accessToken: string\r\n    refreshToken: string\r\n    expiresIn: number\r\n    scope: string\r\n  }\r\n  failure?: {\r\n    errorCode: string\r\n    errorMessage: string\r\n  }\r\n  error?: {\r\n    errorType: number\r\n    errorCode: string\r\n    reason: string\r\n    data: Record<string, unknown>\r\n    title: string | null\r\n  }\r\n}\r\n\r\n// 토스 사용자 정보 (이름만)\r\nexport interface TossUserInfo {\r\n  resultType: 'SUCCESS' | 'FAILURE' | 'FAIL'\r\n  success?: {\r\n    userKey: number\r\n    name: string\r\n  }\r\n  failure?: {\r\n    errorCode: string\r\n    errorMessage: string\r\n  }\r\n  error?: {\r\n    errorType: number\r\n    errorCode: string\r\n    reason: string\r\n    data: Record<string, unknown>\r\n    title: string | null\r\n  }\r\n}\r\n\r\n// 토스 에러 코드\r\nexport enum TossErrorCode {\r\n  // 인증 관련\r\n  INVALID_AUTHORIZATION_CODE = 'INVALID_AUTHORIZATION_CODE',\r\n  EXPIRED_AUTHORIZATION_CODE = 'EXPIRED_AUTHORIZATION_CODE',\r\n  INVALID_ACCESS_TOKEN = 'INVALID_ACCESS_TOKEN',\r\n  EXPIRED_ACCESS_TOKEN = 'EXPIRED_ACCESS_TOKEN',\r\n  INVALID_REFRESH_TOKEN = 'INVALID_REFRESH_TOKEN',\r\n  EXPIRED_REFRESH_TOKEN = 'EXPIRED_REFRESH_TOKEN',\r\n  \r\n  // 사용자 관련\r\n  USER_NOT_FOUND = 'USER_NOT_FOUND',\r\n  USER_ALREADY_EXISTS = 'USER_ALREADY_EXISTS',\r\n  INSUFFICIENT_PERMISSIONS = 'INSUFFICIENT_PERMISSIONS',\r\n  \r\n  // 시스템 관련\r\n  INTERNAL_SERVER_ERROR = 'INTERNAL_SERVER_ERROR',\r\n  NETWORK_ERROR = 'NETWORK_ERROR',\r\n  UNKNOWN_ERROR = 'UNKNOWN_ERROR'\r\n}\r\n\r\n// 토스 에러\r\nexport interface TossError {\r\n  code: TossErrorCode\r\n  message: string\r\n  details?: unknown\r\n}\r\n\r\n// 토스 로그인 결과\r\nexport interface TossLoginResult {\r\n  auth: TossAuthResponse\r\n  token: TossTokenResponse['success']\r\n  user: TossUserInfo['success']\r\n}\r\n\r\n"],"names":[],"mappings":"AAAA,yBAAyB;;;;;AAkDlB,IAAA,AAAK,uCAAA;IACV,QAAQ;;;;;;;IAQR,SAAS;;;;IAKT,SAAS;;;;WAdC","debugId":null}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/WORK%20SPACE/health-hero/src/utils/errorHandler.ts"],"sourcesContent":["import { TossError, TossErrorCode } from '@/types/toss'\r\n\r\nexport class ErrorHandler {\r\n  static handleTossError(error: unknown): TossError {\r\n    // 토스 API 에러 처리\r\n    if (error && typeof error === 'object' && 'failure' in error) {\r\n      const errorObj = error as { failure: { errorCode: string; errorMessage: string } }\r\n      return {\r\n        code: this.mapTossErrorCode(errorObj.failure.errorCode),\r\n        message: errorObj.failure.errorMessage,\r\n        details: errorObj.failure\r\n      }\r\n    }\r\n\r\n    // 네트워크 에러 처리\r\n    if (error instanceof TypeError && error.message.includes('fetch')) {\r\n      return {\r\n        code: TossErrorCode.NETWORK_ERROR,\r\n        message: '네트워크 연결을 확인해주세요.',\r\n        details: error\r\n      }\r\n    }\r\n\r\n    // 알 수 없는 에러\r\n    const errorMessage = error && typeof error === 'object' && 'message' in error \r\n      ? String(error.message) \r\n      : '알 수 없는 오류가 발생했습니다.'\r\n    \r\n    return {\r\n      code: TossErrorCode.UNKNOWN_ERROR,\r\n      message: errorMessage,\r\n      details: error\r\n    }\r\n  }\r\n\r\n  private static mapTossErrorCode(tossCode: string): TossErrorCode {\r\n    const errorMap: Record<string, TossErrorCode> = {\r\n      'INVALID_AUTHORIZATION_CODE': TossErrorCode.INVALID_AUTHORIZATION_CODE,\r\n      'EXPIRED_AUTHORIZATION_CODE': TossErrorCode.EXPIRED_AUTHORIZATION_CODE,\r\n      'INVALID_ACCESS_TOKEN': TossErrorCode.INVALID_ACCESS_TOKEN,\r\n      'EXPIRED_ACCESS_TOKEN': TossErrorCode.EXPIRED_ACCESS_TOKEN,\r\n      'INVALID_REFRESH_TOKEN': TossErrorCode.INVALID_REFRESH_TOKEN,\r\n      'EXPIRED_REFRESH_TOKEN': TossErrorCode.EXPIRED_REFRESH_TOKEN,\r\n      'USER_NOT_FOUND': TossErrorCode.USER_NOT_FOUND,\r\n      'INTERNAL_SERVER_ERROR': TossErrorCode.INTERNAL_SERVER_ERROR\r\n    }\r\n\r\n    return errorMap[tossCode] || TossErrorCode.UNKNOWN_ERROR\r\n  }\r\n\r\n  static getErrorMessage(error: TossError): string {\r\n    const errorMessages: Record<TossErrorCode, string> = {\r\n      [TossErrorCode.INVALID_AUTHORIZATION_CODE]: '유효하지 않은 인가 코드입니다.',\r\n      [TossErrorCode.EXPIRED_AUTHORIZATION_CODE]: '인가 코드가 만료되었습니다. 다시 로그인해주세요.',\r\n      [TossErrorCode.INVALID_ACCESS_TOKEN]: '유효하지 않은 액세스 토큰입니다.',\r\n      [TossErrorCode.EXPIRED_ACCESS_TOKEN]: '액세스 토큰이 만료되었습니다.',\r\n      [TossErrorCode.INVALID_REFRESH_TOKEN]: '유효하지 않은 리프레시 토큰입니다.',\r\n      [TossErrorCode.EXPIRED_REFRESH_TOKEN]: '리프레시 토큰이 만료되었습니다. 다시 로그인해주세요.',\r\n      [TossErrorCode.USER_NOT_FOUND]: '사용자를 찾을 수 없습니다.',\r\n      [TossErrorCode.USER_ALREADY_EXISTS]: '이미 존재하는 사용자입니다.',\r\n      [TossErrorCode.INSUFFICIENT_PERMISSIONS]: '권한이 부족합니다.',\r\n      [TossErrorCode.INTERNAL_SERVER_ERROR]: '서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요.',\r\n      [TossErrorCode.NETWORK_ERROR]: '네트워크 연결을 확인해주세요.',\r\n      [TossErrorCode.UNKNOWN_ERROR]: '알 수 없는 오류가 발생했습니다.'\r\n    }\r\n\r\n    return errorMessages[error.code] || error.message\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM;IACX,OAAO,gBAAgB,KAAc,EAAa;QAChD,eAAe;QACf,IAAI,SAAS,OAAO,UAAU,YAAY,aAAa,OAAO;YAC5D,MAAM,WAAW;YACjB,OAAO;gBACL,MAAM,IAAI,CAAC,gBAAgB,CAAC,SAAS,OAAO,CAAC,SAAS;gBACtD,SAAS,SAAS,OAAO,CAAC,YAAY;gBACtC,SAAS,SAAS,OAAO;YAC3B;QACF;QAEA,aAAa;QACb,IAAI,iBAAiB,aAAa,MAAM,OAAO,CAAC,QAAQ,CAAC,UAAU;YACjE,OAAO;gBACL,MAAM,wIAAa,CAAC,aAAa;gBACjC,SAAS;gBACT,SAAS;YACX;QACF;QAEA,YAAY;QACZ,MAAM,eAAe,SAAS,OAAO,UAAU,YAAY,aAAa,QACpE,OAAO,MAAM,OAAO,IACpB;QAEJ,OAAO;YACL,MAAM,wIAAa,CAAC,aAAa;YACjC,SAAS;YACT,SAAS;QACX;IACF;IAEA,OAAe,iBAAiB,QAAgB,EAAiB;QAC/D,MAAM,WAA0C;YAC9C,8BAA8B,wIAAa,CAAC,0BAA0B;YACtE,8BAA8B,wIAAa,CAAC,0BAA0B;YACtE,wBAAwB,wIAAa,CAAC,oBAAoB;YAC1D,wBAAwB,wIAAa,CAAC,oBAAoB;YAC1D,yBAAyB,wIAAa,CAAC,qBAAqB;YAC5D,yBAAyB,wIAAa,CAAC,qBAAqB;YAC5D,kBAAkB,wIAAa,CAAC,cAAc;YAC9C,yBAAyB,wIAAa,CAAC,qBAAqB;QAC9D;QAEA,OAAO,QAAQ,CAAC,SAAS,IAAI,wIAAa,CAAC,aAAa;IAC1D;IAEA,OAAO,gBAAgB,KAAgB,EAAU;QAC/C,MAAM,gBAA+C;YACnD,CAAC,wIAAa,CAAC,0BAA0B,CAAC,EAAE;YAC5C,CAAC,wIAAa,CAAC,0BAA0B,CAAC,EAAE;YAC5C,CAAC,wIAAa,CAAC,oBAAoB,CAAC,EAAE;YACtC,CAAC,wIAAa,CAAC,oBAAoB,CAAC,EAAE;YACtC,CAAC,wIAAa,CAAC,qBAAqB,CAAC,EAAE;YACvC,CAAC,wIAAa,CAAC,qBAAqB,CAAC,EAAE;YACvC,CAAC,wIAAa,CAAC,cAAc,CAAC,EAAE;YAChC,CAAC,wIAAa,CAAC,mBAAmB,CAAC,EAAE;YACrC,CAAC,wIAAa,CAAC,wBAAwB,CAAC,EAAE;YAC1C,CAAC,wIAAa,CAAC,qBAAqB,CAAC,EAAE;YACvC,CAAC,wIAAa,CAAC,aAAa,CAAC,EAAE;YAC/B,CAAC,wIAAa,CAAC,aAAa,CAAC,EAAE;QACjC;QAEA,OAAO,aAAa,CAAC,MAAM,IAAI,CAAC,IAAI,MAAM,OAAO;IACnD;AACF","debugId":null}},
    {"offset": {"line": 225, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/WORK%20SPACE/health-hero/src/hooks/useTossAuth.ts"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { appLogin } from '@apps-in-toss/web-framework'\r\nimport { TossAuthResponse, TossTokenResponse, TossUserInfo, TossLoginResult } from '@/types/toss'\r\nimport { TokenManager } from '@/utils/tokenManager'\r\nimport { ErrorHandler } from '@/utils/errorHandler'\r\n\r\nexport const useTossAuth = () => {\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  // 1. 토스 로그인 (인가 코드 받기)\r\n  const tossLogin = async (): Promise<TossAuthResponse> => {\r\n    try {\r\n      console.log('[useTossAuth] appLogin 함수 호출 시작...')\r\n      \r\n      const result = await appLogin()\r\n      console.log('[useTossAuth] appLogin() 응답:', result)\r\n      \r\n      if (!result.authorizationCode) {\r\n        throw new Error('인가 코드를 받을 수 없습니다.')\r\n      }\r\n      \r\n      console.log('[useTossAuth] 인가 코드 획득 성공:', {\r\n        authorizationCode: result.authorizationCode.substring(0, 20) + '...',\r\n        referrer: result.referrer\r\n      })\r\n      \r\n      return result as TossAuthResponse\r\n    } catch (error) {\r\n      console.error('[useTossAuth] 토스 로그인 실패:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // 2. 액세스 토큰 발급 (Supabase Edge Function 우선, 백엔드 대체)\r\n  const getAccessToken = async (authorizationCode: string, referrer: string): Promise<TossTokenResponse> => {\r\n    try {\r\n      // Supabase Edge Function 우선 사용 (mTLS 지원)\r\n      const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\r\n      const backendUrl = process.env.NEXT_PUBLIC_BACKEND_URL\r\n      \r\n      const useSupabase = !!supabaseUrl\r\n      const url = useSupabase\r\n        ? `${supabaseUrl}/functions/v1/toss-auth`\r\n        : backendUrl\r\n        ? `${backendUrl}/api/toss/generate-token`\r\n        : 'http://localhost:3001/api/toss/generate-token'\r\n      \r\n      const body = useSupabase\r\n        ? { action: 'generate-token', authorizationCode, referrer }\r\n        : { authorizationCode, referrer }\r\n      \r\n      console.log(`[useTossAuth] 액세스 토큰 요청 (${useSupabase ? 'Supabase Edge Function (mTLS)' : 'Node.js 백엔드'}):`, {\r\n        url,\r\n        method: 'POST',\r\n        body: { authorizationCode: authorizationCode.substring(0, 20) + '...', referrer }\r\n      })\r\n      \r\n      const headers: Record<string, string> = {\r\n        'Content-Type': 'application/json'\r\n      }\r\n      \r\n      if (useSupabase && process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY) {\r\n        headers['Authorization'] = `Bearer ${process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY}`\r\n      }\r\n      \r\n      const response = await fetch(url, {\r\n        method: 'POST',\r\n        headers,\r\n        body: JSON.stringify(body)\r\n      })\r\n\r\n      console.log('[useTossAuth] 액세스 토큰 응답:', {\r\n        ok: response.ok,\r\n        status: response.status,\r\n        statusText: response.statusText\r\n      })\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text()\r\n        console.error('[useTossAuth] 토큰 요청 실패 응답:', errorText)\r\n        throw new Error(`토큰 요청 실패: ${response.status} - ${errorText}`)\r\n      }\r\n\r\n      const data = await response.json()\r\n      console.log('[useTossAuth] 액세스 토큰 발급 성공:', data.resultType)\r\n      return data\r\n    } catch (error) {\r\n      console.error('[useTossAuth] 액세스 토큰 발급 실패:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // 3. 사용자 정보 조회 (Supabase Edge Function 우선, 백엔드 대체)\r\n  const getUserInfo = async (accessToken: string, referrer: string): Promise<TossUserInfo> => {\r\n    try {\r\n      // Supabase Edge Function 우선 사용 (mTLS 지원)\r\n      const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\r\n      const backendUrl = process.env.NEXT_PUBLIC_BACKEND_URL\r\n      \r\n      const useSupabase = !!supabaseUrl\r\n      const url = useSupabase\r\n        ? `${supabaseUrl}/functions/v1/toss-auth`\r\n        : backendUrl\r\n        ? `${backendUrl}/api/toss/user-info`\r\n        : 'http://localhost:3001/api/toss/user-info'\r\n      \r\n      const body = useSupabase\r\n        ? { action: 'get-user-info', accessToken, referrer }\r\n        : { accessToken, referrer }\r\n      \r\n      console.log(`[useTossAuth] 사용자 정보 요청 (${useSupabase ? 'Supabase Edge Function (mTLS)' : 'Node.js 백엔드'}):`, {\r\n        url,\r\n        accessToken: accessToken.substring(0, 20) + '...',\r\n        referrer\r\n      })\r\n      \r\n      const headers: Record<string, string> = {\r\n        'Content-Type': 'application/json'\r\n      }\r\n      \r\n      if (useSupabase && process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY) {\r\n        headers['Authorization'] = `Bearer ${process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY}`\r\n      }\r\n      \r\n      const response = await fetch(url, {\r\n        method: 'POST', // Edge Function은 POST로 액션 전달\r\n        headers,\r\n        body: JSON.stringify(body)\r\n      })\r\n\r\n      console.log(`[useTossAuth] 사용자 정보 응답 상태:`, response.status)\r\n\r\n      if (!response.ok) {\r\n        const errorText = await response.text()\r\n        console.error('[useTossAuth] 사용자 정보 요청 실패:', errorText)\r\n        throw new Error(`사용자 정보 요청 실패: ${response.status}`)\r\n      }\r\n\r\n      const data = await response.json()\r\n      console.log('[useTossAuth] 사용자 정보 조회 성공:', data)\r\n      return data\r\n    } catch (error) {\r\n      console.error('[useTossAuth] 사용자 정보 조회 실패:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // 통합 로그인 함수\r\n  const login = async (): Promise<TossLoginResult> => {\r\n    setIsLoading(true)\r\n    setError(null)\r\n\r\n    try {\r\n      // 1. 토스 로그인 (인가 코드 받기)\r\n      const authResult = await tossLogin()\r\n      \r\n      // 2. 액세스 토큰 발급\r\n      const tokenResult = await getAccessToken(\r\n        authResult.authorizationCode,\r\n        authResult.referrer\r\n      )\r\n      \r\n      if (tokenResult.resultType === 'FAILURE') {\r\n        const tossError = ErrorHandler.handleTossError(tokenResult)\r\n        throw new Error(ErrorHandler.getErrorMessage(tossError))\r\n      }\r\n\r\n      if (!tokenResult.success) {\r\n        throw new Error('토큰 발급에 실패했습니다.')\r\n      }\r\n\r\n      // 3. 사용자 정보 조회\r\n      console.log('[useTossAuth] 사용자 정보 조회 시작 - referrer:', authResult.referrer)\r\n      const userResult = await getUserInfo(tokenResult.success.accessToken, authResult.referrer)\r\n      \r\n      console.log('[useTossAuth] 사용자 정보 조회 결과:', userResult)\r\n      \r\n      if (userResult.resultType === 'FAIL' || userResult.resultType === 'FAILURE') {\r\n        console.error('[useTossAuth] 토스 API 에러:', userResult.error)\r\n        console.error('[useTossAuth] 사용된 referrer:', authResult.referrer)\r\n        const tossError = ErrorHandler.handleTossError(userResult)\r\n        throw new Error(`사용자 정보 조회 실패 (${authResult.referrer}): ${ErrorHandler.getErrorMessage(tossError)}`)\r\n      }\r\n\r\n      if (!userResult.success) {\r\n        throw new Error('사용자 정보 조회에 실패했습니다.')\r\n      }\r\n\r\n      // 4. 토큰 저장\r\n      TokenManager.saveTokens(\r\n        tokenResult.success.accessToken,\r\n        tokenResult.success.refreshToken,\r\n        tokenResult.success.expiresIn,\r\n        userResult.success.userKey\r\n      )\r\n\r\n      return {\r\n        auth: authResult,\r\n        token: tokenResult.success,\r\n        user: userResult.success\r\n      }\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : '알 수 없는 오류'\r\n      setError(errorMessage)\r\n      throw error\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  // 로그아웃\r\n  const logout = () => {\r\n    TokenManager.clearTokens()\r\n    setError(null)\r\n  }\r\n\r\n  return {\r\n    login,\r\n    logout,\r\n    isLoading,\r\n    error\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 421, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/WORK%20SPACE/health-hero/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n  throw new Error('Missing Supabase environment variables. Please check your .env.local file.')\r\n}\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\r\n  auth: {\r\n    autoRefreshToken: true,\r\n    persistSession: true,\r\n    detectSessionInUrl: false\r\n  }\r\n})\r\n\r\n"],"names":[],"mappings":";;;;AAEoB;AAFpB;;AAEA,MAAM;AACN,MAAM;AAEN;;AAIO,MAAM,WAAW,IAAA,0MAAY,EAAC,aAAa,iBAAiB;IACjE,MAAM;QACJ,kBAAkB;QAClB,gBAAgB;QAChB,oBAAoB;IACtB;AACF","debugId":null}},
    {"offset": {"line": 446, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/WORK%20SPACE/health-hero/src/services/tossAuthService.ts"],"sourcesContent":["import { supabase } from '@/lib/supabase'\r\nimport { UserProfile, UserProfileInsert } from '@/types/database'\r\nimport { TossLoginResult } from '@/types/toss'\r\n\r\nexport class TossAuthService {\r\n  // 토스 정보로 Supabase 사용자 생성/로그인\r\n  static async createOrUpdateUser(tossData: TossLoginResult) {\r\n    const { user, token, auth } = tossData\r\n    \r\n    if (!user || !token) {\r\n      throw new Error('토스 사용자 정보가 없습니다.')\r\n    }\r\n    \r\n    // 토스 userKey를 고유 식별자로 사용 (유효한 이메일 형식)\r\n    const email = `user${user.userKey}@health-hero.app`\r\n    const password = `toss_${user.userKey}_${Date.now()}`\r\n\r\n    try {\r\n      // 1. 기존 사용자 확인\r\n      const existingProfile = await this.findUserByTossKey(user.userKey)\r\n      \r\n      let userId: string\r\n\r\n      if (existingProfile) {\r\n        // 기존 사용자 - 기존 세션 사용\r\n        userId = existingProfile.id\r\n        console.log('✅ 기존 사용자:', userId)\r\n        \r\n        // Supabase Auth 세션 생성 (비밀번호 무시)\r\n        const { error: signInError } = await supabase.auth.signInWithPassword({\r\n          email: existingProfile.email || email,\r\n          password: `toss_${user.userKey}_permanent`\r\n        })\r\n        \r\n        if (signInError) {\r\n          console.log('⚠️ 세션 생성 실패 (무시):', signInError.message)\r\n        }\r\n      } else {\r\n        // 신규 사용자 - Supabase Auth로 생성\r\n        const { data: signUpData, error: signUpError } = await supabase.auth.signUp({\r\n          email,\r\n          password,\r\n          options: {\r\n            emailRedirectTo: undefined,\r\n            data: {\r\n              toss_user_key: user.userKey,\r\n              name: user.name\r\n            }\r\n          }\r\n        })\r\n\r\n        if (signUpError) {\r\n          console.error('❌ signUp 실패:', signUpError)\r\n          throw signUpError\r\n        }\r\n\r\n        if (!signUpData.user) {\r\n          throw new Error('사용자 생성에 실패했습니다.')\r\n        }\r\n\r\n        userId = signUpData.user.id\r\n        console.log('✅ 신규 사용자 생성:', userId)\r\n      }\r\n\r\n      // 2. 사용자 프로필 업데이트/생성\r\n      const tokenExpiresAt = new Date(Date.now() + token.expiresIn * 1000).toISOString()\r\n      \r\n      const profileData: UserProfileInsert = {\r\n        id: userId,\r\n        email,\r\n        name: user.name,\r\n        toss_user_key: user.userKey,\r\n        toss_access_token: token.accessToken,\r\n        toss_refresh_token: token.refreshToken,\r\n        toss_token_expires_at: tokenExpiresAt,\r\n        toss_referrer: auth.referrer,\r\n        level: existingProfile?.level || 1,\r\n        current_exp: existingProfile?.current_exp || 0,\r\n        total_score: existingProfile?.total_score || 0,\r\n        current_streak: existingProfile?.current_streak || 0,\r\n        current_stage: existingProfile?.current_stage || 1,\r\n        current_phase: existingProfile?.current_phase || 1\r\n      }\r\n\r\n      const { data: profile, error: profileError } = await supabase\r\n        .from('user_profiles')\r\n        .upsert(profileData, {\r\n          onConflict: 'id'\r\n        })\r\n        .select()\r\n        .single()\r\n\r\n      if (profileError) {\r\n        console.error('프로필 저장 실패:', profileError)\r\n        throw profileError\r\n      }\r\n\r\n      // 3. 로그인 기록 저장\r\n      await supabase\r\n        .from('toss_login_logs')\r\n        .insert({\r\n          user_id: userId,\r\n          toss_user_key: user.userKey,\r\n          referrer: auth.referrer,\r\n          user_agent: typeof navigator !== 'undefined' ? navigator.userAgent : null\r\n        })\r\n\r\n      return {\r\n        userId,\r\n        profile\r\n      }\r\n    } catch (error) {\r\n      console.error('Supabase 사용자 생성/업데이트 실패:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // 토스 userKey로 기존 사용자 찾기\r\n  static async findUserByTossKey(tossUserKey: number): Promise<UserProfile | null> {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('user_profiles')\r\n        .select('*')\r\n        .eq('toss_user_key', tossUserKey)\r\n        .single()\r\n\r\n      if (error) {\r\n        if (error.code === 'PGRST116') {\r\n          // 사용자 없음\r\n          return null\r\n        }\r\n        throw error\r\n      }\r\n\r\n      return data\r\n    } catch (error) {\r\n      console.error('사용자 조회 실패:', error)\r\n      return null\r\n    }\r\n  }\r\n\r\n  // 현재 로그인된 사용자 프로필 가져오기\r\n  static async getCurrentUserProfile(): Promise<UserProfile | null> {\r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser()\r\n      \r\n      if (!user) {\r\n        return null\r\n      }\r\n\r\n      const { data, error } = await supabase\r\n        .from('user_profiles')\r\n        .select('*')\r\n        .eq('id', user.id)\r\n        .single()\r\n\r\n      if (error) {\r\n        throw error\r\n      }\r\n\r\n      return data\r\n    } catch (error) {\r\n      console.error('현재 사용자 프로필 조회 실패:', error)\r\n      return null\r\n    }\r\n  }\r\n\r\n  // 사용자 프로필 업데이트\r\n  static async updateUserProfile(userId: string, updates: Partial<UserProfile>) {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('user_profiles')\r\n        .update(updates)\r\n        .eq('id', userId)\r\n        .select()\r\n        .single()\r\n\r\n      if (error) {\r\n        throw error\r\n      }\r\n\r\n      return data\r\n    } catch (error) {\r\n      console.error('프로필 업데이트 실패:', error)\r\n      throw error\r\n    }\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAIO,MAAM;IACX,6BAA6B;IAC7B,aAAa,mBAAmB,QAAyB,EAAE;QACzD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG;QAE9B,IAAI,CAAC,QAAQ,CAAC,OAAO;YACnB,MAAM,IAAI,MAAM;QAClB;QAEA,sCAAsC;QACtC,MAAM,QAAQ,AAAC,OAAmB,OAAb,KAAK,OAAO,EAAC;QAClC,MAAM,WAAW,AAAC,QAAuB,OAAhB,KAAK,OAAO,EAAC,KAAc,OAAX,KAAK,GAAG;QAEjD,IAAI;YACF,eAAe;YACf,MAAM,kBAAkB,MAAM,IAAI,CAAC,iBAAiB,CAAC,KAAK,OAAO;YAEjE,IAAI;YAEJ,IAAI,iBAAiB;gBACnB,oBAAoB;gBACpB,SAAS,gBAAgB,EAAE;gBAC3B,QAAQ,GAAG,CAAC,aAAa;gBAEzB,gCAAgC;gBAChC,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,qIAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC;oBACpE,OAAO,gBAAgB,KAAK,IAAI;oBAChC,UAAU,AAAC,QAAoB,OAAb,KAAK,OAAO,EAAC;gBACjC;gBAEA,IAAI,aAAa;oBACf,QAAQ,GAAG,CAAC,qBAAqB,YAAY,OAAO;gBACtD;YACF,OAAO;gBACL,6BAA6B;gBAC7B,MAAM,EAAE,MAAM,UAAU,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,qIAAQ,CAAC,IAAI,CAAC,MAAM,CAAC;oBAC1E;oBACA;oBACA,SAAS;wBACP,iBAAiB;wBACjB,MAAM;4BACJ,eAAe,KAAK,OAAO;4BAC3B,MAAM,KAAK,IAAI;wBACjB;oBACF;gBACF;gBAEA,IAAI,aAAa;oBACf,QAAQ,KAAK,CAAC,gBAAgB;oBAC9B,MAAM;gBACR;gBAEA,IAAI,CAAC,WAAW,IAAI,EAAE;oBACpB,MAAM,IAAI,MAAM;gBAClB;gBAEA,SAAS,WAAW,IAAI,CAAC,EAAE;gBAC3B,QAAQ,GAAG,CAAC,gBAAgB;YAC9B;YAEA,qBAAqB;YACrB,MAAM,iBAAiB,IAAI,KAAK,KAAK,GAAG,KAAK,MAAM,SAAS,GAAG,MAAM,WAAW;YAEhF,MAAM,cAAiC;gBACrC,IAAI;gBACJ;gBACA,MAAM,KAAK,IAAI;gBACf,eAAe,KAAK,OAAO;gBAC3B,mBAAmB,MAAM,WAAW;gBACpC,oBAAoB,MAAM,YAAY;gBACtC,uBAAuB;gBACvB,eAAe,KAAK,QAAQ;gBAC5B,OAAO,CAAA,4BAAA,sCAAA,gBAAiB,KAAK,KAAI;gBACjC,aAAa,CAAA,4BAAA,sCAAA,gBAAiB,WAAW,KAAI;gBAC7C,aAAa,CAAA,4BAAA,sCAAA,gBAAiB,WAAW,KAAI;gBAC7C,gBAAgB,CAAA,4BAAA,sCAAA,gBAAiB,cAAc,KAAI;gBACnD,eAAe,CAAA,4BAAA,sCAAA,gBAAiB,aAAa,KAAI;gBACjD,eAAe,CAAA,4BAAA,sCAAA,gBAAiB,aAAa,KAAI;YACnD;YAEA,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,qIAAQ,CAC1D,IAAI,CAAC,iBACL,MAAM,CAAC,aAAa;gBACnB,YAAY;YACd,GACC,MAAM,GACN,MAAM;YAET,IAAI,cAAc;gBAChB,QAAQ,KAAK,CAAC,cAAc;gBAC5B,MAAM;YACR;YAEA,eAAe;YACf,MAAM,qIAAQ,CACX,IAAI,CAAC,mBACL,MAAM,CAAC;gBACN,SAAS;gBACT,eAAe,KAAK,OAAO;gBAC3B,UAAU,KAAK,QAAQ;gBACvB,YAAY,OAAO,cAAc,cAAc,UAAU,SAAS,GAAG;YACvE;YAEF,OAAO;gBACL;gBACA;YACF;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,MAAM;QACR;IACF;IAEA,wBAAwB;IACxB,aAAa,kBAAkB,WAAmB,EAA+B;QAC/E,IAAI;YACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,qIAAQ,CACnC,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,iBAAiB,aACpB,MAAM;YAET,IAAI,OAAO;gBACT,IAAI,MAAM,IAAI,KAAK,YAAY;oBAC7B,SAAS;oBACT,OAAO;gBACT;gBACA,MAAM;YACR;YAEA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,cAAc;YAC5B,OAAO;QACT;IACF;IAEA,uBAAuB;IACvB,aAAa,wBAAqD;QAChE,IAAI;YACF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,qIAAQ,CAAC,IAAI,CAAC,OAAO;YAEtD,IAAI,CAAC,MAAM;gBACT,OAAO;YACT;YAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,qIAAQ,CACnC,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,MAAM;YAET,IAAI,OAAO;gBACT,MAAM;YACR;YAEA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,qBAAqB;YACnC,OAAO;QACT;IACF;IAEA,eAAe;IACf,aAAa,kBAAkB,MAAc,EAAE,OAA6B,EAAE;QAC5E,IAAI;YACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,qIAAQ,CACnC,IAAI,CAAC,iBACL,MAAM,CAAC,SACP,EAAE,CAAC,MAAM,QACT,MAAM,GACN,MAAM;YAET,IAAI,OAAO;gBACT,MAAM;YACR;YAEA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,MAAM;QACR;IACF;AACF","debugId":null}},
    {"offset": {"line": 597, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/WORK%20SPACE/health-hero/src/store/authStore.ts"],"sourcesContent":["import { create } from 'zustand'\r\nimport { persist } from 'zustand/middleware'\r\nimport { UserProfile } from '@/types/database'\r\nimport { supabase } from '@/lib/supabase'\r\n\r\ninterface AuthState {\r\n  user: UserProfile | null\r\n  isAuthenticated: boolean\r\n  isLoading: boolean\r\n  error: string | null\r\n  \r\n  // Actions\r\n  setUser: (user: UserProfile | null) => void\r\n  setLoading: (isLoading: boolean) => void\r\n  setError: (error: string | null) => void\r\n  logout: () => Promise<void>\r\n  initialize: () => Promise<void>\r\n  updateProfile: (updates: Partial<UserProfile>) => void\r\n}\r\n\r\nexport const useAuthStore = create<AuthState>()(\r\n  persist(\r\n    (set, get) => ({\r\n      user: null,\r\n      isAuthenticated: false,\r\n      isLoading: false,\r\n      error: null,\r\n\r\n      setUser: (user) => set({ \r\n        user, \r\n        isAuthenticated: !!user,\r\n        error: null \r\n      }),\r\n\r\n      setLoading: (isLoading) => set({ isLoading }),\r\n\r\n      setError: (error) => set({ error }),\r\n\r\n      logout: async () => {\r\n        try {\r\n          // Supabase 로그아웃\r\n          await supabase.auth.signOut()\r\n          \r\n          // 상태 초기화\r\n          set({\r\n            user: null,\r\n            isAuthenticated: false,\r\n            error: null\r\n          })\r\n        } catch (error) {\r\n          console.error('로그아웃 실패:', error)\r\n          set({ error: '로그아웃에 실패했습니다.' })\r\n        }\r\n      },\r\n\r\n      initialize: async () => {\r\n        set({ isLoading: true })\r\n        \r\n        try {\r\n          // Supabase 세션 확인\r\n          const { data: { session } } = await supabase.auth.getSession()\r\n          \r\n          if (session?.user) {\r\n            // 사용자 프로필 가져오기\r\n            const { data: profile, error } = await supabase\r\n              .from('user_profiles')\r\n              .select('*')\r\n              .eq('id', session.user.id)\r\n              .single()\r\n\r\n            if (error) {\r\n              console.error('프로필 로드 실패:', error)\r\n              set({ isAuthenticated: false, user: null })\r\n            } else {\r\n              set({ user: profile, isAuthenticated: true })\r\n            }\r\n          } else {\r\n            set({ isAuthenticated: false, user: null })\r\n          }\r\n        } catch (error) {\r\n          console.error('인증 상태 초기화 실패:', error)\r\n          set({ isAuthenticated: false, user: null })\r\n        } finally {\r\n          set({ isLoading: false })\r\n        }\r\n      },\r\n\r\n      updateProfile: (updates) => {\r\n        const currentUser = get().user\r\n        if (currentUser) {\r\n          set({\r\n            user: {\r\n              ...currentUser,\r\n              ...updates\r\n            }\r\n          })\r\n        }\r\n      }\r\n    }),\r\n    {\r\n      name: 'auth-storage',\r\n      partialize: (state) => ({\r\n        user: state.user,\r\n        isAuthenticated: state.isAuthenticated\r\n      })\r\n    }\r\n  )\r\n)\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AAEA;;;;AAiBO,MAAM,eAAe,IAAA,qJAAM,IAChC,IAAA,2JAAO,EACL,CAAC,KAAK,MAAQ,CAAC;QACb,MAAM;QACN,iBAAiB;QACjB,WAAW;QACX,OAAO;QAEP,SAAS,CAAC,OAAS,IAAI;gBACrB;gBACA,iBAAiB,CAAC,CAAC;gBACnB,OAAO;YACT;QAEA,YAAY,CAAC,YAAc,IAAI;gBAAE;YAAU;QAE3C,UAAU,CAAC,QAAU,IAAI;gBAAE;YAAM;QAEjC,QAAQ;YACN,IAAI;gBACF,gBAAgB;gBAChB,MAAM,qIAAQ,CAAC,IAAI,CAAC,OAAO;gBAE3B,SAAS;gBACT,IAAI;oBACF,MAAM;oBACN,iBAAiB;oBACjB,OAAO;gBACT;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,YAAY;gBAC1B,IAAI;oBAAE,OAAO;gBAAgB;YAC/B;QACF;QAEA,YAAY;YACV,IAAI;gBAAE,WAAW;YAAK;YAEtB,IAAI;gBACF,iBAAiB;gBACjB,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,GAAG,MAAM,qIAAQ,CAAC,IAAI,CAAC,UAAU;gBAE5D,IAAI,oBAAA,8BAAA,QAAS,IAAI,EAAE;oBACjB,eAAe;oBACf,MAAM,EAAE,MAAM,OAAO,EAAE,KAAK,EAAE,GAAG,MAAM,qIAAQ,CAC5C,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,QAAQ,IAAI,CAAC,EAAE,EACxB,MAAM;oBAET,IAAI,OAAO;wBACT,QAAQ,KAAK,CAAC,cAAc;wBAC5B,IAAI;4BAAE,iBAAiB;4BAAO,MAAM;wBAAK;oBAC3C,OAAO;wBACL,IAAI;4BAAE,MAAM;4BAAS,iBAAiB;wBAAK;oBAC7C;gBACF,OAAO;oBACL,IAAI;wBAAE,iBAAiB;wBAAO,MAAM;oBAAK;gBAC3C;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,iBAAiB;gBAC/B,IAAI;oBAAE,iBAAiB;oBAAO,MAAM;gBAAK;YAC3C,SAAU;gBACR,IAAI;oBAAE,WAAW;gBAAM;YACzB;QACF;QAEA,eAAe,CAAC;YACd,MAAM,cAAc,MAAM,IAAI;YAC9B,IAAI,aAAa;gBACf,IAAI;oBACF,MAAM;wBACJ,GAAG,WAAW;wBACd,GAAG,OAAO;oBACZ;gBACF;YACF;QACF;IACF,CAAC,GACD;IACE,MAAM;IACN,YAAY,CAAC,QAAU,CAAC;YACtB,MAAM,MAAM,IAAI;YAChB,iBAAiB,MAAM,eAAe;QACxC,CAAC;AACH","debugId":null}},
    {"offset": {"line": 705, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/WORK%20SPACE/health-hero/src/components/TossLoginButton.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { useTossAuth } from '@/hooks/useTossAuth'\r\nimport { TossAuthService } from '@/services/tossAuthService'\r\nimport { useAuthStore } from '@/store/authStore'\r\n\r\n// 앱인토스 환경 확인을 위한 타입 선언\r\ndeclare global {\r\n  interface Window {\r\n    appLogin?: () => Promise<unknown>\r\n  }\r\n}\r\n\r\nexport default function TossLoginButton() {\r\n  const router = useRouter()\r\n  const { login, isLoading: tossLoading, error: tossError } = useTossAuth()\r\n  const { setUser, setLoading, setError } = useAuthStore()\r\n  const [localError, setLocalError] = useState<string | null>(null)\r\n  const [isClient, setIsClient] = useState(false)\r\n\r\n  // Hydration 에러 방지: 클라이언트에서만 렌더링\r\n  useEffect(() => {\r\n    setIsClient(true)\r\n  }, [])\r\n\r\n  const handleLogin = async () => {\r\n    console.log('🚀 [TossLogin] 로그인 시작')\r\n    setLocalError(null)\r\n    setError(null)\r\n    setLoading(true)\r\n\r\n    try {\r\n      // 1. 토스 로그인\r\n      console.log('📝 [TossLogin] 토스 로그인 SDK 호출 중...')\r\n      const tossResult = await login()\r\n      console.log('✅ [TossLogin] 토스 로그인 성공:', {\r\n        userKey: tossResult.user?.userKey,\r\n        name: tossResult.user?.name,\r\n        referrer: tossResult.auth.referrer,\r\n        accessToken: tossResult.token?.accessToken.substring(0, 20) + '...'\r\n      })\r\n\r\n      // 2. Supabase 연동\r\n      console.log('💾 [TossLogin] Supabase에 사용자 정보 저장 중...')\r\n      const supabaseResult = await TossAuthService.createOrUpdateUser(tossResult)\r\n      console.log('✅ [TossLogin] Supabase 연동 성공:', {\r\n        userId: supabaseResult.profile?.id,\r\n        tossUserKey: supabaseResult.profile?.toss_user_key\r\n      })\r\n\r\n      // 3. 사용자 정보 저장\r\n      if (supabaseResult.profile) {\r\n        setUser(supabaseResult.profile)\r\n        console.log('✅ [TossLogin] Zustand store 업데이트 완료')\r\n      }\r\n\r\n      // 4. 게임 페이지로 이동\r\n      console.log('🎮 [TossLogin] 게임 페이지로 이동')\r\n      router.push('/game')\r\n    } catch (error) {\r\n      const errorMessage = error instanceof Error ? error.message : '로그인에 실패했습니다.'\r\n      console.error('❌ [TossLogin] 로그인 실패:', {\r\n        message: errorMessage,\r\n        error: error,\r\n        stack: error instanceof Error ? error.stack : undefined\r\n      })\r\n      setLocalError(errorMessage)\r\n      setError(errorMessage)\r\n    } finally {\r\n      setLoading(false)\r\n      console.log('🏁 [TossLogin] 로그인 플로우 종료')\r\n    }\r\n  }\r\n\r\n  const displayError = tossError || localError\r\n\r\n  return (\r\n    <div className=\"w-full space-y-4\">\r\n      <button\r\n        onClick={handleLogin}\r\n        disabled={tossLoading}\r\n        className=\"w-full bg-[#3182F6] hover:bg-[#2C5FCC] text-white font-bold py-4 px-8 rounded-2xl text-lg transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none\"\r\n      >\r\n        {tossLoading ? (\r\n          <span className=\"flex items-center justify-center\">\r\n            <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n              <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n              <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n            </svg>\r\n            로그인 중...\r\n          </span>\r\n        ) : (\r\n          '토스로 시작하기'\r\n        )}\r\n      </button>\r\n\r\n      {displayError && (\r\n        <div className=\"bg-red-500/10 border border-red-500/50 rounded-lg p-3\">\r\n          <p className=\"text-red-500 text-sm text-center\">{displayError}</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* 개발 환경 안내 */}\r\n      {isClient && typeof window !== 'undefined' && typeof window.appLogin === 'undefined' && (\r\n        <div className=\"bg-yellow-500/10 border border-yellow-500/50 rounded-lg p-3\">\r\n          <p className=\"text-yellow-600 text-xs text-center\">\r\n            💡 토스 로그인은 앱인토스 환경에서만 사용할 수 있습니다.<br />\r\n            샌드박스 앱 또는 토스앱에서 테스트해주세요.\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAee,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,EAAE,KAAK,EAAE,WAAW,WAAW,EAAE,OAAO,SAAS,EAAE,GAAG,IAAA,6IAAW;IACvE,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,QAAQ,EAAE,GAAG,IAAA,4IAAY;IACtD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAgB;IAC5D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IAEzC,gCAAgC;IAChC,IAAA,0KAAS;qCAAC;YACR,YAAY;QACd;oCAAG,EAAE;IAEL,MAAM,cAAc;QAClB,QAAQ,GAAG,CAAC;QACZ,cAAc;QACd,SAAS;QACT,WAAW;QAEX,IAAI;gBAKS,kBACH,mBAEO,mBAOL,yBACK;YAff,YAAY;YACZ,QAAQ,GAAG,CAAC;YACZ,MAAM,aAAa,MAAM;YACzB,QAAQ,GAAG,CAAC,4BAA4B;gBACtC,OAAO,GAAE,mBAAA,WAAW,IAAI,cAAf,uCAAA,iBAAiB,OAAO;gBACjC,IAAI,GAAE,oBAAA,WAAW,IAAI,cAAf,wCAAA,kBAAiB,IAAI;gBAC3B,UAAU,WAAW,IAAI,CAAC,QAAQ;gBAClC,aAAa,EAAA,oBAAA,WAAW,KAAK,cAAhB,wCAAA,kBAAkB,WAAW,CAAC,SAAS,CAAC,GAAG,OAAM;YAChE;YAEA,iBAAiB;YACjB,QAAQ,GAAG,CAAC;YACZ,MAAM,iBAAiB,MAAM,wJAAe,CAAC,kBAAkB,CAAC;YAChE,QAAQ,GAAG,CAAC,iCAAiC;gBAC3C,MAAM,GAAE,0BAAA,eAAe,OAAO,cAAtB,8CAAA,wBAAwB,EAAE;gBAClC,WAAW,GAAE,2BAAA,eAAe,OAAO,cAAtB,+CAAA,yBAAwB,aAAa;YACpD;YAEA,eAAe;YACf,IAAI,eAAe,OAAO,EAAE;gBAC1B,QAAQ,eAAe,OAAO;gBAC9B,QAAQ,GAAG,CAAC;YACd;YAEA,gBAAgB;YAChB,QAAQ,GAAG,CAAC;YACZ,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,OAAO;YACd,MAAM,eAAe,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YAC9D,QAAQ,KAAK,CAAC,yBAAyB;gBACrC,SAAS;gBACT,OAAO;gBACP,OAAO,iBAAiB,QAAQ,MAAM,KAAK,GAAG;YAChD;YACA,cAAc;YACd,SAAS;QACX,SAAU;YACR,WAAW;YACX,QAAQ,GAAG,CAAC;QACd;IACF;IAEA,MAAM,eAAe,aAAa;IAElC,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBACC,SAAS;gBACT,UAAU;gBACV,WAAU;0BAET,4BACC,6LAAC;oBAAK,WAAU;;sCACd,6LAAC;4BAAI,WAAU;4BAA6C,OAAM;4BAA6B,MAAK;4BAAO,SAAQ;;8CACjH,6LAAC;oCAAO,WAAU;oCAAa,IAAG;oCAAK,IAAG;oCAAK,GAAE;oCAAK,QAAO;oCAAe,aAAY;;;;;;8CACxF,6LAAC;oCAAK,WAAU;oCAAa,MAAK;oCAAe,GAAE;;;;;;;;;;;;wBAC/C;;;;;;2BAIR;;;;;;YAIH,8BACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAE,WAAU;8BAAoC;;;;;;;;;;;YAKpD,YAAY,aAAkB,eAAe,OAAO,OAAO,QAAQ,KAAK,6BACvE,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAE,WAAU;;wBAAsC;sCAChB,6LAAC;;;;;wBAAK;;;;;;;;;;;;;;;;;;AAOnD;GApGwB;;QACP,kJAAS;QACoC,6IAAW;QAC7B,4IAAY;;;KAHhC","debugId":null}},
    {"offset": {"line": 899, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Desktop/WORK%20SPACE/health-hero/src/components/GuestLoginButton.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { supabase } from \"@/lib/supabase\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function GuestLoginButton() {\r\n  const [loading, setLoading] = useState(false);\r\n  const router = useRouter();\r\n\r\n  const handleGuestLogin = async () => {\r\n    try {\r\n      setLoading(true);\r\n\r\n      // Supabase 익명 인증\r\n      const { data, error } = await supabase.auth.signInAnonymously();\r\n\r\n      if (error) throw error;\r\n\r\n      console.log(\"Guest login successful:\", data);\r\n\r\n      // 게임 페이지로 이동\r\n      router.push(\"/game\");\r\n    } catch (error) {\r\n      console.error(\"Guest login error:\", error);\r\n      alert(\"게스트 로그인 실패\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <button\r\n      onClick={handleGuestLogin}\r\n      disabled={loading}\r\n      className=\"w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-4 px-6 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n    >\r\n      {loading ? \"로그인 중...\" : \"게스트로 시작하기\"}\r\n    </button>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS;;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,mBAAmB;QACvB,IAAI;YACF,WAAW;YAEX,iBAAiB;YACjB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,qIAAQ,CAAC,IAAI,CAAC,iBAAiB;YAE7D,IAAI,OAAO,MAAM;YAEjB,QAAQ,GAAG,CAAC,2BAA2B;YAEvC,aAAa;YACb,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,sBAAsB;YACpC,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,6LAAC;QACC,SAAS;QACT,UAAU;QACV,WAAU;kBAET,UAAU,aAAa;;;;;;AAG9B;GAlCwB;;QAEP,kJAAS;;;KAFF","debugId":null}}]
}